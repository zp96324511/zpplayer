/**
 * Minified by jsDelivr using UglifyJS v3.4.4.
 * Original file: /npm/chimee@0.11.0/lib/index.browser.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Chimee=t()}(this,function(){"use strict";var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return e(t={exports:{}},t.exports),t.exports}var p=n(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),y=n(function(e){var t=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)}),a=(y.version,function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}),b=function(r,i,e){if(a(r),void 0===i)return r;switch(e){case 1:return function(e){return r.call(i,e)};case 2:return function(e,t){return r.call(i,e,t)};case 3:return function(e,t,n){return r.call(i,e,t,n)}}return function(){return r.apply(i,arguments)}},f=function(e){return"object"==typeof e?null!==e:"function"==typeof e},v=function(e){if(!f(e))throw TypeError(e+" is not an object!");return e},d=function(e){try{return!!e()}catch(e){return!0}},h=!d(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),r=p.document,i=f(r)&&f(r.createElement),o=function(e){return i?r.createElement(e):{}},u=!h&&!d(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}),s=function(e,t){if(!f(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!f(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!f(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!f(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},c=Object.defineProperty,l={f:h?Object.defineProperty:function(e,t,n){if(v(e),t=s(t,!0),v(n),u)try{return c(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},E=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},k=h?function(e,t,n){return l.f(e,t,E(1,n))}:function(e,t,n){return e[t]=n,e},g={}.hasOwnProperty,m=function(e,t){return g.call(e,t)},w="prototype",_=function(e,t,n){var r,i,o,a=e&_.F,u=e&_.G,s=e&_.S,c=e&_.P,l=e&_.B,f=e&_.W,d=u?y:y[t]||(y[t]={}),h=d[w],v=u?p:s?p[t]:(p[t]||{})[w];for(r in u&&(n=t),n)(i=!a&&v&&void 0!==v[r])&&m(d,r)||(o=i?v[r]:n[r],d[r]=u&&"function"!=typeof v[r]?n[r]:l&&i?b(o,p):f&&v[r]==o?function(r){var e=function(e,t,n){if(this instanceof r){switch(arguments.length){case 0:return new r;case 1:return new r(e);case 2:return new r(e,t)}return new r(e,t,n)}return r.apply(this,arguments)};return e[w]=r[w],e}(o):c&&"function"==typeof o?b(Function.call,o):o,c&&((d.virtual||(d.virtual={}))[r]=o,e&_.R&&h&&!h[r]&&k(h,r,o)))};_.F=1,_.G=2,_.S=4,_.P=8,_.B=16,_.W=32,_.U=64,_.R=128;var x=_;x(x.S+x.F*!h,"Object",{defineProperty:l.f});var O=y.Object,S=function(e,t,n){return O.defineProperty(e,t,n)},P=n(function(e){e.exports={default:S,__esModule:!0}}),M=t(P),T={}.toString,A=function(e){return T.call(e).slice(8,-1)},L=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==A(e)?e.split(""):Object(e)},j=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},C=function(e){return L(j(e))},N={f:{}.propertyIsEnumerable},I=Object.getOwnPropertyDescriptor,F={f:h?I:function(e,t){if(e=C(e),t=s(t,!0),u)try{return I(e,t)}catch(e){}if(m(e,t))return E(!N.f.call(e,t),e[t])}},z=function(e,t){var n=(y.Object||{})[e]||Object[e],r={};r[e]=t(n),x(x.S+x.F*d(function(){n(1)}),"Object",r)},R=F.f;z("getOwnPropertyDescriptor",function(){return function(e,t){return R(C(e),t)}});var $=y.Object,V=function(e,t){return $.getOwnPropertyDescriptor(e,t)},D=n(function(e){e.exports={default:V,__esModule:!0}}),K=t(D),B=function(e){return Object(j(e))},G=n(function(e){var t="__core-js_shared__",n=p[t]||(p[t]={});(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:y.version,mode:"pure",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})}),W=0,q=Math.random(),U=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++W+q).toString(36))},H=G("keys"),Y=function(e){return H[e]||(H[e]=U(e))},Q=Y("IE_PROTO"),Z=Object.prototype,J=Object.getPrototypeOf||function(e){return e=B(e),m(e,Q)?e[Q]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Z:null};z("getPrototypeOf",function(){return function(e){return J(B(e))}});var X,ee=y.Object.getPrototypeOf,te=n(function(e){e.exports={default:ee,__esModule:!0}}),ne=t(te),re=Math.ceil,ie=Math.floor,oe=function(e){return isNaN(e=+e)?0:(0<e?ie:re)(e)},ae=k,ue={},se=Math.min,ce=function(e){return 0<e?se(oe(e),9007199254740991):0},le=Math.max,fe=Math.min,de=(X=!1,function(e,t,n){var r,i,o,a=C(e),u=ce(a.length),s=(i=u,(r=oe(r=n))<0?le(r+i,0):fe(r,i));if(X&&t!=t){for(;s<u;)if((o=a[s++])!=o)return!0}else for(;s<u;s++)if((X||s in a)&&a[s]===t)return X||s||0;return!X&&-1}),he=Y("IE_PROTO"),ve=function(e,t){var n,r=C(e),i=0,o=[];for(n in r)n!=he&&m(r,n)&&o.push(n);for(;t.length>i;)m(r,n=t[i++])&&(~de(o,n)||o.push(n));return o},pe="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ye=Object.keys||function(e){return ve(e,pe)},ge=h?Object.defineProperties:function(e,t){v(e);for(var n,r=ye(t),i=r.length,o=0;o<i;)l.f(e,n=r[o++],t[n]);return e},me=p.document,be=me&&me.documentElement,we=Y("IE_PROTO"),_e=function(){},Ee="prototype",ke=function(){var e,t=o("iframe"),n=pe.length;for(t.style.display="none",be.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),ke=e.F;n--;)delete ke[Ee][pe[n]];return ke()},xe=Object.create||function(e,t){var n;return null!==e?(_e[Ee]=v(e),n=new _e,_e[Ee]=null,n[we]=e):n=ke(),void 0===t?n:ge(n,t)},Oe=n(function(e){var t=G("wks"),n=p.Symbol,r="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=r&&n[e]||(r?n:U)("Symbol."+e))}).store=t}),Se=l.f,Pe=Oe("toStringTag"),Te=function(e,t,n){e&&!m(e=n?e:e.prototype,Pe)&&Se(e,Pe,{configurable:!0,value:t})},Ae={};k(Ae,Oe("iterator"),function(){return this});var Le,je=Oe("iterator"),Me=!([].keys&&"next"in[].keys()),Ce="values",Ne=function(){return this},Ie=function(e,t,n,r,i,o,a){var u,s,c;s=t,c=r,(u=n).prototype=xe(Ae,{next:E(1,c)}),Te(u,s+" Iterator");var l,f,d,h=function(e){if(!Me&&e in g)return g[e];switch(e){case"keys":case Ce:return function(){return new n(this,e)}}return function(){return new n(this,e)}},v=t+" Iterator",p=i==Ce,y=!1,g=e.prototype,m=g[je]||g["@@iterator"]||i&&g[i],b=m||h(i),w=i?p?h("entries"):b:void 0,_="Array"==t&&g.entries||m;if(_&&(d=J(_.call(new e)))!==Object.prototype&&d.next&&Te(d,v,!0),p&&m&&m.name!==Ce&&(y=!0,b=function(){return m.call(this)}),a&&(Me||y||!g[je])&&k(g,je,b),ue[t]=b,ue[v]=Ne,i)if(l={values:p?b:h(Ce),keys:o?b:h("keys"),entries:w},a)for(f in l)f in g||ae(g,f,l[f]);else x(x.P+x.F*(Me||y),t,l);return l},Fe=(Le=!0,function(e,t){var n,r,i=String(j(e)),o=oe(t),a=i.length;return o<0||a<=o?Le?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===a||(r=i.charCodeAt(o+1))<56320||57343<r?Le?i.charAt(o):n:Le?i.slice(o,o+2):r-56320+(n-55296<<10)+65536});Ie(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=Fe(t,n),this._i+=e.length,{value:e,done:!1})});var ze=function(e,t){return{value:t,done:!!e}};Ie(Array,"Array",function(e,t){this._t=C(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,ze(1)):ze(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values");ue.Arguments=ue.Array;for(var Re=Oe("toStringTag"),$e="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Ve=0;Ve<$e.length;Ve++){var De=$e[Ve],Ke=p[De],Be=Ke&&Ke.prototype;Be&&!Be[Re]&&k(Be,Re,De),ue[De]=ue.Array}var Ge={f:Oe},We=Ge.f("iterator"),qe=n(function(e){e.exports={default:We,__esModule:!0}});t(qe);var Ue=n(function(e){var n=U("meta"),t=l.f,r=0,i=Object.isExtensible||function(){return!0},o=!d(function(){return i(Object.preventExtensions({}))}),a=function(e){t(e,n,{value:{i:"O"+ ++r,w:{}}})},u=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!f(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!m(e,n)){if(!i(e))return"F";if(!t)return"E";a(e)}return e[n].i},getWeak:function(e,t){if(!m(e,n)){if(!i(e))return!0;if(!t)return!1;a(e)}return e[n].w},onFreeze:function(e){return o&&u.NEED&&i(e)&&!m(e,n)&&a(e),e}}}),He=(Ue.KEY,Ue.NEED,Ue.fastKey,Ue.getWeak,Ue.onFreeze,l.f),Ye=function(e){var t=y.Symbol||(y.Symbol={});"_"==e.charAt(0)||e in t||He(t,e,{value:Ge.f(e)})},Qe={f:Object.getOwnPropertySymbols},Ze=Array.isArray||function(e){return"Array"==A(e)},Je=pe.concat("length","prototype"),Xe={f:Object.getOwnPropertyNames||function(e){return ve(e,Je)}},et=Xe.f,tt={}.toString,nt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],rt={f:function(e){return nt&&"[object Window]"==tt.call(e)?function(e){try{return et(e)}catch(e){return nt.slice()}}(e):et(C(e))}},it=Ue.KEY,ot=F.f,at=l.f,ut=rt.f,st=p.Symbol,ct=p.JSON,lt=ct&&ct.stringify,ft="prototype",dt=Oe("_hidden"),ht=Oe("toPrimitive"),vt={}.propertyIsEnumerable,pt=G("symbol-registry"),yt=G("symbols"),gt=G("op-symbols"),mt=Object[ft],bt="function"==typeof st,wt=p.QObject,_t=!wt||!wt[ft]||!wt[ft].findChild,Et=h&&d(function(){return 7!=xe(at({},"a",{get:function(){return at(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=ot(mt,t);r&&delete mt[t],at(e,t,n),r&&e!==mt&&at(mt,t,r)}:at,kt=function(e){var t=yt[e]=xe(st[ft]);return t._k=e,t},xt=bt&&"symbol"==typeof st.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof st},Ot=function(e,t,n){return e===mt&&Ot(gt,t,n),v(e),t=s(t,!0),v(n),m(yt,t)?(n.enumerable?(m(e,dt)&&e[dt][t]&&(e[dt][t]=!1),n=xe(n,{enumerable:E(0,!1)})):(m(e,dt)||at(e,dt,E(1,{})),e[dt][t]=!0),Et(e,t,n)):at(e,t,n)},St=function(e,t){v(e);for(var n,r=function(e){var t=ye(e),n=Qe.f;if(n)for(var r,i=n(e),o=N.f,a=0;i.length>a;)o.call(e,r=i[a++])&&t.push(r);return t}(t=C(t)),i=0,o=r.length;i<o;)Ot(e,n=r[i++],t[n]);return e},Pt=function(e){var t=vt.call(this,e=s(e,!0));return!(this===mt&&m(yt,e)&&!m(gt,e))&&(!(t||!m(this,e)||!m(yt,e)||m(this,dt)&&this[dt][e])||t)},Tt=function(e,t){if(e=C(e),t=s(t,!0),e!==mt||!m(yt,t)||m(gt,t)){var n=ot(e,t);return!n||!m(yt,t)||m(e,dt)&&e[dt][t]||(n.enumerable=!0),n}},At=function(e){for(var t,n=ut(C(e)),r=[],i=0;n.length>i;)m(yt,t=n[i++])||t==dt||t==it||r.push(t);return r},Lt=function(e){for(var t,n=e===mt,r=ut(n?gt:C(e)),i=[],o=0;r.length>o;)!m(yt,t=r[o++])||n&&!m(mt,t)||i.push(yt[t]);return i};bt||(ae((st=function(){if(this instanceof st)throw TypeError("Symbol is not a constructor!");var t=U(0<arguments.length?arguments[0]:void 0),n=function(e){this===mt&&n.call(gt,e),m(this,dt)&&m(this[dt],t)&&(this[dt][t]=!1),Et(this,t,E(1,e))};return h&&_t&&Et(mt,t,{configurable:!0,set:n}),kt(t)})[ft],"toString",function(){return this._k}),F.f=Tt,l.f=Ot,Xe.f=rt.f=At,N.f=Pt,Qe.f=Lt,Ge.f=function(e){return kt(Oe(e))}),x(x.G+x.W+x.F*!bt,{Symbol:st});for(var jt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Mt=0;jt.length>Mt;)Oe(jt[Mt++]);for(var Ct=ye(Oe.store),Nt=0;Ct.length>Nt;)Ye(Ct[Nt++]);x(x.S+x.F*!bt,"Symbol",{for:function(e){return m(pt,e+="")?pt[e]:pt[e]=st(e)},keyFor:function(e){if(!xt(e))throw TypeError(e+" is not a symbol!");for(var t in pt)if(pt[t]===e)return t},useSetter:function(){_t=!0},useSimple:function(){_t=!1}}),x(x.S+x.F*!bt,"Object",{create:function(e,t){return void 0===t?xe(e):St(xe(e),t)},defineProperty:Ot,defineProperties:St,getOwnPropertyDescriptor:Tt,getOwnPropertyNames:At,getOwnPropertySymbols:Lt}),ct&&x(x.S+x.F*(!bt||d(function(){var e=st();return"[null]"!=lt([e])||"{}"!=lt({a:e})||"{}"!=lt(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(f(t)||void 0!==e)&&!xt(e))return Ze(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!xt(t))return t}),r[1]=t,lt.apply(ct,r)}}),st[ft][ht]||k(st[ft],ht,st[ft].valueOf),Te(st,"Symbol"),Te(Math,"Math",!0),Te(p.JSON,"JSON",!0),Ye("asyncIterator"),Ye("observable");var It=y.Symbol,Ft=n(function(e){e.exports={default:It,__esModule:!0}});t(Ft);var zt=n(function(e,t){t.__esModule=!0;var n=o(qe),r=o(Ft),i="function"==typeof r.default&&"symbol"==typeof n.default?function(e){return typeof e}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof r.default&&"symbol"===i(n.default)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":void 0===e?"undefined":i(e)}}),Rt=t(zt),$t=t(n(function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}})),Vt=t(n(function(e,t){t.__esModule=!0;var n,r=(n=zt)&&n.__esModule?n:{default:n};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,r.default)(t))&&"function"!=typeof t?e:t}})),Dt=t(n(function(e,t){t.__esModule=!0;var u=n(te),s=n(D);function n(e){return e&&e.__esModule?e:{default:e}}t.default=function e(t,n,r){null===t&&(t=Function.prototype);var i=(0,s.default)(t,n);if(void 0===i){var o=(0,u.default)(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}})),Kt=t(n(function(e,t){t.__esModule=!0;var n,i=(n=P)&&n.__esModule?n:{default:n};t.default=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}()})),Bt=function(e,t){if(v(e),!f(t)&&null!==t)throw TypeError(t+": can't set as prototype!")},Gt={set:Object.setPrototypeOf||("__proto__"in{}?function(e,n,r){try{(r=b(Function.call,F.f(Object.prototype,"__proto__").set,2))(e,[]),n=!(e instanceof Array)}catch(e){n=!0}return function(e,t){return Bt(e,t),n?e.__proto__=t:r(e,t),e}}({},!1):void 0),check:Bt};x(x.S,"Object",{setPrototypeOf:Gt.set});var Wt=y.Object.setPrototypeOf,qt=n(function(e){e.exports={default:Wt,__esModule:!0}});t(qt),x(x.S,"Object",{create:xe});var Ut=y.Object,Ht=function(e,t){return Ut.create(e,t)},Yt=n(function(e){e.exports={default:Ht,__esModule:!0}}),Qt=t(Yt),Zt=t(n(function(e,t){t.__esModule=!0;var n=o(qt),r=o(Yt),i=o(zt);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,i.default)(t)));e.prototype=(0,r.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}})),Jt=Oe("toStringTag"),Xt="Arguments"==A(function(){return arguments}()),en=function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Jt))?n:Xt?A(t):"Object"==(r=A(t))&&"function"==typeof t.callee?"Arguments":r},tn=Oe("iterator"),nn=y.isIterable=function(e){var t=Object(e);return void 0!==t[tn]||"@@iterator"in t||ue.hasOwnProperty(en(t))},rn=n(function(e){e.exports={default:nn,__esModule:!0}});t(rn);var on,an=Oe("iterator"),un=y.getIteratorMethod=function(e){if(null!=e)return e[an]||e["@@iterator"]||ue[en(e)]},sn=y.getIterator=function(e){var t=un(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return v(t.call(e))},cn=n(function(e){e.exports={default:sn,__esModule:!0}}),ln=t(cn),fn=t(n(function(e,t){t.__esModule=!0;var n=r(rn),s=r(cn);function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(Array.isArray(e))return e;if((0,n.default)(Object(e)))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=(0,s.default)(e);!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})),dn=N.f,hn=(on=!0,function(e){for(var t,n=C(e),r=ye(n),i=r.length,o=0,a=[];o<i;)dn.call(n,t=r[o++])&&a.push(on?[t,n[t]]:n[t]);return a});x(x.S,"Object",{entries:function(e){return hn(e)}});var vn=y.Object.entries,pn=t(n(function(e){e.exports={default:vn,__esModule:!0}}));z("keys",function(){return function(e){return ye(B(e))}});var yn=y.Object.keys,gn=t(n(function(e){e.exports={default:yn,__esModule:!0}})),mn=n(function(j){!function(e){var s,t=Object.prototype,c=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag",a=e.regeneratorRuntime;if(a)j.exports=a;else{(a=e.regeneratorRuntime=j.exports).wrap=m;var f="suspendedStart",d="suspendedYield",h="executing",v="completed",p={},u={};u[i]=function(){return this};var l=Object.getPrototypeOf,y=l&&l(l(A([])));y&&y!==t&&c.call(y,i)&&(u=y);var g=E.prototype=w.prototype=Object.create(u);_.prototype=g.constructor=E,E.constructor=_,E[o]=_.displayName="GeneratorFunction",a.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(g),e},a.awrap=function(e){return{__await:e}},k(x.prototype),x.prototype[r]=function(){return this},a.AsyncIterator=x,a.async=function(e,t,n,r){var i=new x(m(e,t,n,r));return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},k(g),g[o]="Generator",g[i]=function(){return this},g.toString=function(){return"[object Generator]"},a.keys=function(n){var r=[];for(var e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=s)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return o.type="throw",o.arg=n,r.next=e,t&&(r.method="next",r.arg=s),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=c.call(i,"catchLoc"),u=c.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&c.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=s),p}}}function m(e,t,n,r){var o,a,u,s,i=t&&t.prototype instanceof w?t:w,c=Object.create(i.prototype),l=new T(r||[]);return c._invoke=(o=e,a=n,u=l,s=f,function(e,t){if(s===h)throw new Error("Generator is already running");if(s===v){if("throw"===e)throw t;return L()}for(u.method=e,u.arg=t;;){var n=u.delegate;if(n){var r=O(n,u);if(r){if(r===p)continue;return r}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(s===f)throw s=v,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);s=h;var i=b(o,a,u);if("normal"===i.type){if(s=u.done?v:d,i.arg===p)continue;return{value:i.arg,done:u.done}}"throw"===i.type&&(s=v,u.method="throw",u.arg=i.arg)}}),c}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function w(){}function _(){}function E(){}function k(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function x(s){var t;this._invoke=function(n,r){function e(){return new Promise(function(e,t){!function t(e,n,r,i){var o=b(s[e],s,n);if("throw"!==o.type){var a=o.arg,u=a.value;return u&&"object"==typeof u&&c.call(u,"__await")?Promise.resolve(u.__await).then(function(e){t("next",e,r,i)},function(e){t("throw",e,r,i)}):Promise.resolve(u).then(function(e){a.value=e,r(a)},i)}i(o.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}}function O(e,t){var n=e.iterator[t.method];if(n===s){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=s,O(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=b(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=s),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function A(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(c.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=s,e.done=!0,e};return r.next=r}}return{next:L}}function L(){return{value:s,done:!0}}}(function(){return this}()||Function("return this")())}),bn=function(){return this}()||Function("return this")(),wn=bn.regeneratorRuntime&&0<=Object.getOwnPropertyNames(bn).indexOf("regeneratorRuntime"),_n=wn&&bn.regeneratorRuntime;bn.regeneratorRuntime=void 0;var En=mn;if(wn)bn.regeneratorRuntime=_n;else try{delete bn.regeneratorRuntime}catch(e){bn.regeneratorRuntime=void 0}var kn,xn,On,Sn=En,Pn=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e},Tn=function(t,e,n,r){try{return r?e(v(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&v(i.call(t)),e}},An=Oe("iterator"),Ln=Array.prototype,jn=function(e){return void 0!==e&&(ue.Array===e||Ln[An]===e)},Mn=n(function(e){var d={},h={},t=e.exports=function(e,t,n,r,i){var o,a,u,s,c=i?function(){return e}:un(e),l=b(n,r,t?2:1),f=0;if("function"!=typeof c)throw TypeError(e+" is not iterable!");if(jn(c)){for(o=ce(e.length);f<o;f++)if((s=t?l(v(a=e[f])[0],a[1]):l(e[f]))===d||s===h)return s}else for(u=c.call(e);!(a=u.next()).done;)if((s=Tn(u,l,a.value,t))===d||s===h)return s};t.BREAK=d,t.RETURN=h}),Cn=Oe("species"),Nn=function(e,t){var n,r=v(e).constructor;return void 0===r||null==(n=v(r)[Cn])?t:a(n)},In=p.process,Fn=p.setImmediate,zn=p.clearImmediate,Rn=p.MessageChannel,$n=p.Dispatch,Vn=0,Dn={},Kn="onreadystatechange",Bn=function(){var e=+this;if(Dn.hasOwnProperty(e)){var t=Dn[e];delete Dn[e],t()}},Gn=function(e){Bn.call(e.data)};Fn&&zn||(Fn=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Dn[++Vn]=function(){!function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}e.apply(n,t)}("function"==typeof e?e:Function(e),t)},kn(Vn),Vn},zn=function(e){delete Dn[e]},"process"==A(In)?kn=function(e){In.nextTick(b(Bn,e,1))}:$n&&$n.now?kn=function(e){$n.now(b(Bn,e,1))}:Rn?(On=(xn=new Rn).port2,xn.port1.onmessage=Gn,kn=b(On.postMessage,On,1)):p.addEventListener&&"function"==typeof postMessage&&!p.importScripts?(kn=function(e){p.postMessage(e+"","*")},p.addEventListener("message",Gn,!1)):kn=Kn in o("script")?function(e){be.appendChild(o("script"))[Kn]=function(){be.removeChild(this),Bn.call(e)}}:function(e){setTimeout(b(Bn,e,1),0)});var Wn={set:Fn,clear:zn},qn=Wn.set,Un=p.MutationObserver||p.WebKitMutationObserver,Hn=p.process,Yn=p.Promise,Qn="process"==A(Hn);function Zn(e){var n,r;this.promise=new e(function(e,t){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=e,r=t}),this.resolve=a(n),this.reject=a(r)}var Jn={f:function(e){return new Zn(e)}},Xn=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},er=p.navigator,tr=er&&er.userAgent||"",nr=function(e,t){if(v(e),f(t)&&t.constructor===e)return t;var n=Jn.f(e);return(0,n.resolve)(t),n.promise},rr=function(e,t,n){for(var r in t)n&&e[r]?e[r]=t[r]:k(e,r,t[r]);return e},ir=Oe("species"),or=function(e){var t="function"==typeof y[e]?y[e]:p[e];h&&t&&!t[ir]&&l.f(t,ir,{configurable:!0,get:function(){return this}})},ar=Oe("iterator"),ur=!1;try{[7][ar]().return=function(){ur=!0}}catch(e){}var sr,cr,lr,fr,dr=function(e,t){if(!t&&!ur)return!1;var n=!1;try{var r=[7],i=r[ar]();i.next=function(){return{done:n=!0}},r[ar]=function(){return i},e(r)}catch(e){}return n},hr=Wn.set,vr=function(){var n,r,i,e=function(){var e,t;for(Qn&&(e=Hn.domain)&&e.exit();n;){t=n.fn,n=n.next;try{t()}catch(e){throw n?i():r=void 0,e}}r=void 0,e&&e.enter()};if(Qn)i=function(){Hn.nextTick(e)};else if(!Un||p.navigator&&p.navigator.standalone)if(Yn&&Yn.resolve){var t=Yn.resolve(void 0);i=function(){t.then(e)}}else i=function(){qn.call(p,e)};else{var o=!0,a=document.createTextNode("");new Un(e).observe(a,{characterData:!0}),i=function(){a.data=o=!o}}return function(e){var t={fn:e,next:void 0};r&&(r.next=t),n||(n=t,i()),r=t}}(),pr="Promise",yr=p.TypeError,gr=p.process,mr=gr&&gr.versions,br=mr&&mr.v8||"",wr=p[pr],_r="process"==en(gr),Er=function(){},kr=cr=Jn.f,xr=!!function(){try{var e=wr.resolve(1),t=(e.constructor={})[Oe("species")]=function(e){e(Er,Er)};return(_r||"function"==typeof PromiseRejectionEvent)&&e.then(Er)instanceof t&&0!==br.indexOf("6.6")&&-1===tr.indexOf("Chrome/66")}catch(e){}}(),Or=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},Sr=function(l,n){if(!l._n){l._n=!0;var r=l._c;vr(function(){for(var s=l._v,c=1==l._s,e=0,t=function(e){var t,n,r,i=c?e.ok:e.fail,o=e.resolve,a=e.reject,u=e.domain;try{i?(c||(2==l._h&&Ar(l),l._h=1),!0===i?t=s:(u&&u.enter(),t=i(s),u&&(u.exit(),r=!0)),t===e.promise?a(yr("Promise-chain cycle")):(n=Or(t))?n.call(t,o,a):o(t)):a(s)}catch(e){u&&!r&&u.exit(),a(e)}};r.length>e;)t(r[e++]);l._c=[],l._n=!1,n&&!l._h&&Pr(l)})}},Pr=function(o){hr.call(p,function(){var e,t,n,r=o._v,i=Tr(o);if(i&&(e=Xn(function(){_r?gr.emit("unhandledRejection",r,o):(t=p.onunhandledrejection)?t({promise:o,reason:r}):(n=p.console)&&n.error&&n.error("Unhandled promise rejection",r)}),o._h=_r||Tr(o)?2:1),o._a=void 0,i&&e.e)throw e.v})},Tr=function(e){return 1!==e._h&&0===(e._a||e._c).length},Ar=function(t){hr.call(p,function(){var e;_r?gr.emit("rejectionHandled",t):(e=p.onrejectionhandled)&&e({promise:t,reason:t._v})})},Lr=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),Sr(t,!0))},jr=function(e){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw yr("Promise can't be resolved itself");(n=Or(e))?vr(function(){var t={_w:r,_d:!1};try{n.call(e,b(jr,t,1),b(Lr,t,1))}catch(e){Lr.call(t,e)}}):(r._v=e,r._s=1,Sr(r,!1))}catch(e){Lr.call({_w:r,_d:!1},e)}}};xr||(wr=function(e){Pn(this,wr,pr,"_h"),a(e),sr.call(this);try{e(b(jr,this,1),b(Lr,this,1))}catch(e){Lr.call(this,e)}},(sr=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=rr(wr.prototype,{then:function(e,t){var n=kr(Nn(this,wr));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=_r?gr.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Sr(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),lr=function(){var e=new sr;this.promise=e,this.resolve=b(jr,e,1),this.reject=b(Lr,e,1)},Jn.f=kr=function(e){return e===wr||e===fr?new lr(e):cr(e)}),x(x.G+x.W+x.F*!xr,{Promise:wr}),Te(wr,pr),or(pr),fr=y[pr],x(x.S+x.F*!xr,pr,{reject:function(e){var t=kr(this);return(0,t.reject)(e),t.promise}}),x(x.S+!0*x.F,pr,{resolve:function(e){return nr(this===fr?wr:this,e)}}),x(x.S+x.F*!(xr&&dr(function(e){wr.all(e).catch(Er)})),pr,{all:function(e){var a=this,t=kr(a),u=t.resolve,s=t.reject,n=Xn(function(){var r=[],i=0,o=1;Mn(e,!1,function(e){var t=i++,n=!1;r.push(void 0),o++,a.resolve(e).then(function(e){n||(n=!0,r[t]=e,--o||u(r))},s)}),--o||u(r)});return n.e&&s(n.v),t.promise},race:function(e){var t=this,n=kr(t),r=n.reject,i=Xn(function(){Mn(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}}),x(x.P+x.R,"Promise",{finally:function(t){var n=Nn(this,y.Promise||p.Promise),e="function"==typeof t;return this.then(e?function(e){return nr(n,t()).then(function(){return e})}:t,e?function(e){return nr(n,t()).then(function(){throw e})}:t)}}),x(x.S,"Promise",{try:function(e){var t=Jn.f(this),n=Xn(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}});var Mr=y.Promise,Cr=n(function(e){e.exports={default:Mr,__esModule:!0}}),Nr=t(Cr),Ir=t(n(function(e,t){t.__esModule=!0;var n,s=(n=Cr)&&n.__esModule?n:{default:n};t.default=function(e){return function(){var u=e.apply(this,arguments);return new s.default(function(o,a){return function t(e,n){try{var r=u[e](n),i=r.value}catch(e){return void a(e)}if(!r.done)return s.default.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});o(i)}("next")})}}})),Fr=Object.assign,zr=!Fr||d(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=Fr({},e)[n]||Object.keys(Fr({},t)).join("")!=r})?function(e,t){for(var n=B(e),r=arguments.length,i=1,o=Qe.f,a=N.f;i<r;)for(var u,s=L(arguments[i++]),c=o?ye(s).concat(o(s)):ye(s),l=c.length,f=0;f<l;)a.call(s,u=c[f++])&&(n[u]=s[u]);return n}:Fr;x(x.S+x.F,"Object",{assign:zr});var Rr=y.Object.assign,$r=t(n(function(e){e.exports={default:Rr,__esModule:!0}})),Vr=Math.floor;x(x.S,"Number",{isInteger:function(e){return!f(e)&&isFinite(e)&&Vr(e)===e}});var Dr=y.Number.isInteger,Kr=t(n(function(e){e.exports={default:Dr,__esModule:!0}})),Br="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",Gr="["+Br+"]",Wr=RegExp("^"+Gr+Gr+"*"),qr=RegExp(Gr+Gr+"*$"),Ur=function(e,t,n){var r={},i=d(function(){return!!Br[e]()||"​"!="​"[e]()}),o=r[e]=i?t(Hr):Br[e];n&&(r[n]=o),x(x.P+x.F*i,"String",r)},Hr=Ur.trim=function(e,t){return e=String(j(e)),1&t&&(e=e.replace(Wr,"")),2&t&&(e=e.replace(qr,"")),e},Yr=Ur,Qr=p.parseFloat,Zr=Yr.trim,Jr=1/Qr(Br+"-0")!=-1/0?function(e){var t=Zr(String(e),3),n=Qr(t);return 0===n&&"-"==t.charAt(0)?-0:n}:Qr;x(x.S+x.F*(Number.parseFloat!=Jr),"Number",{parseFloat:Jr});var Xr=y.Number.parseFloat,ei=t(n(function(e){e.exports={default:Xr,__esModule:!0}}));function ti(e){return void 0!==e}function ni(e){return null==e}function ri(e){return Array.isArray(e)}function ii(e){return"function"==typeof e}function oi(e){return Object(e)===e&&"[object Object]"===String(e)&&!ii(e)&&!ri(e)}function ai(e){return"number"==typeof e}function ui(e){return Kr(e)}function si(e){return ri(e)?0===e.length:oi(e)?0===gn(e).length:!e}function ci(e){return e instanceof Event||(e&&e.originalEvent)instanceof Event}function li(e){return"string"==typeof e||e instanceof String}function fi(e){return"boolean"==typeof e}function di(e){return!!e&&("object"===(void 0===e?"undefined":Rt(e))||"function"==typeof e)&&"function"==typeof e.then}function hi(e){return ni(e)||fi(e)||li(e)||ai(e)}function vi(e){return!!("object"===("undefined"==typeof Node?"undefined":Rt(Node))?e instanceof Node:e&&"object"===(void 0===e?"undefined":Rt(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName)}function pi(e){return!!("object"===("undefined"==typeof HTMLElement?"undefined":Rt(HTMLElement))?e instanceof HTMLElement:e&&"object"===(void 0===e?"undefined":Rt(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)}function yi(e,t){if(!vi(e)||!vi(t))return!1;for(;t.parentNode;)if((t=t.parentNode)===e)return!0;return!1}function gi(e){return e instanceof Error}function mi(e,t){if(!li(e))throw new TypeError("Log's method only acccept string as argument, but not "+e+" in "+(void 0===e?"undefined":Rt(e)));return li(t)?"["+(e=bi.FORCE_GLOBAL_TAG?bi.GLOBAL_TAG:e||bi.GLOBAL_TAG)+"] > "+t:"["+bi.GLOBAL_TAG+"] > "+e}var bi=function(){function n(){$t(this,n)}return Kt(n,null,[{key:"error",value:function(e,t){n.ENABLE_ERROR&&(console.error||console.warn||console.log).call(console,mi(e,t))}},{key:"info",value:function(e,t){n.ENABLE_INFO&&(console.info||console.log).call(console,mi(e,t))}},{key:"warn",value:function(e,t){n.ENABLE_WARN&&(console.warn||console.log).call(console,mi(e,t))}},{key:"debug",value:function(e,t){n.ENABLE_DEBUG&&(console.debug||console.log).call(console,mi(e,t))}},{key:"verbose",value:function(e,t){n.ENABLE_VERBOSE&&console.log(mi(e,t))}}]),n}();bi.GLOBAL_TAG="chimee",bi.FORCE_GLOBAL_TAG=!1,bi.ENABLE_ERROR=!0,bi.ENABLE_INFO=!0,bi.ENABLE_WARN=!0,bi.ENABLE_DEBUG=!0,bi.ENABLE_VERBOSE=!0;n(function(_,E){!function(i,f){var d="function",e="model",t="name",n="type",r="vendor",o="version",a="architecture",u="console",s="mobile",c="tablet",l="smarttv",h="wearable",v={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:f},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},p={rgx:function(e,t){for(var n,r,i,o,a,u,s=0;s<t.length&&!a;){var c=t[s],l=t[s+1];for(n=r=0;n<c.length&&!a;)if(a=c[n++].exec(e))for(i=0;i<l.length;i++)u=a[++r],"object"==typeof(o=l[i])&&0<o.length?2==o.length?typeof o[1]==d?this[o[0]]=o[1].call(this,u):this[o[0]]=o[1]:3==o.length?typeof o[1]!==d||o[1].exec&&o[1].test?this[o[0]]=u?u.replace(o[1],o[2]):f:this[o[0]]=u?o[1].call(this,u,o[2]):f:4==o.length&&(this[o[0]]=u?o[3].call(this,u.replace(o[1],o[2])):f):this[o]=u||f;s+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&0<t[n].length){for(var r=0;r<t[n].length;r++)if(v.has(t[n][r],e))return"?"===n?f:n}else if(v.has(t[n],e))return"?"===n?f:n;return e}},y={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},g={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[t,o],[/(opios)[\/\s]+([\w\.]+)/i],[[t,"Opera Mini"],o],[/\s(opr)\/([\w\.]+)/i],[[t,"Opera"],o],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[t,o],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[t,"IE"],o],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[t,"Edge"],o],[/(yabrowser)\/([\w\.]+)/i],[[t,"Yandex"],o],[/(puffin)\/([\w\.]+)/i],[[t,"Puffin"],o],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[t,"UCBrowser"],o],[/(comodo_dragon)\/([\w\.]+)/i],[[t,/_/g," "],o],[/(micromessenger)\/([\w\.]+)/i],[[t,"WeChat"],o],[/(qqbrowserlite)\/([\w\.]+)/i],[t,o],[/(QQ)\/([\d\.]+)/i],[t,o],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[t,o],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[t,o],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[t,o],[/(MetaSr)[\/\s]?([\w\.]+)/i],[t],[/(LBBROWSER)/i],[t],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[o,[t,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[o,[t,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[o,[t,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[t,/(.+)/,"$1 WebView"],o],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[t,/(.+(?:g|us))(.+)/,"$1 $2"],o],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[o,[t,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[t,o],[/(dolfin)\/([\w\.]+)/i],[[t,"Dolphin"],o],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[t,"Chrome"],o],[/(coast)\/([\w\.]+)/i],[[t,"Opera Coast"],o],[/fxios\/([\w\.-]+)/i],[o,[t,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[o,[t,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[o,t],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[t,"GSA"],o],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[t,[o,p.str,y.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[t,o],[/(navigator|netscape)\/([\w\.-]+)/i],[[t,"Netscape"],o],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[t,o]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[a,"amd64"]],[/(ia32(?=;))/i],[[a,v.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[a,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[a,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[a,/ower/,"",v.lowerize]],[/(sun4\w)[;\)]/i],[[a,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[a,v.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[e,r,[n,c]],[/applecoremedia\/[\w\.]+ \((ipad)/],[e,[r,"Apple"],[n,c]],[/(apple\s{0,1}tv)/i],[[e,"Apple TV"],[r,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[r,e,[n,c]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[e,[r,"Amazon"],[n,c]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[e,p.str,y.device.amazon.model],[r,"Amazon"],[n,s]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[e,r,[n,s]],[/\((ip[honed|\s\w*]+);/i],[e,[r,"Apple"],[n,s]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[r,e,[n,s]],[/\(bb10;\s(\w+)/i],[e,[r,"BlackBerry"],[n,s]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[e,[r,"Asus"],[n,c]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[r,"Sony"],[e,"Xperia Tablet"],[n,c]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[e,[r,"Sony"],[n,s]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[r,e,[n,u]],[/android.+;\s(shield)\sbuild/i],[e,[r,"Nvidia"],[n,u]],[/(playstation\s[34portablevi]+)/i],[e,[r,"Sony"],[n,u]],[/(sprint\s(\w+))/i],[[r,p.str,y.device.sprint.vendor],[e,p.str,y.device.sprint.model],[n,s]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[r,e,[n,c]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[r,[e,/_/g," "],[n,s]],[/(nexus\s9)/i],[e,[r,"HTC"],[n,c]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[e,[r,"Huawei"],[n,s]],[/(microsoft);\s(lumia[\s\w]+)/i],[r,e,[n,s]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[e,[r,"Microsoft"],[n,u]],[/(kin\.[onetw]{3})/i],[[e,/\./g," "],[r,"Microsoft"],[n,s]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[e,[r,"Motorola"],[n,s]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[e,[r,"Motorola"],[n,c]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[r,v.trim],[e,v.trim],[n,l]],[/hbbtv.+maple;(\d+)/i],[[e,/^/,"SmartTV"],[r,"Samsung"],[n,l]],[/\(dtv[\);].+(aquos)/i],[e,[r,"Sharp"],[n,l]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[r,"Samsung"],e,[n,c]],[/smart-tv.+(samsung)/i],[r,[n,l],e],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[r,"Samsung"],e,[n,s]],[/sie-(\w*)/i],[e,[r,"Siemens"],[n,s]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[r,"Nokia"],e,[n,s]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[e,[r,"Acer"],[n,c]],[/android.+([vl]k\-?\d{3})\s+build/i],[e,[r,"LG"],[n,c]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[r,"LG"],e,[n,c]],[/(lg) netcast\.tv/i],[r,e,[n,l]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[e,[r,"LG"],[n,s]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[e,[r,"Lenovo"],[n,c]],[/linux;.+((jolla));/i],[r,e,[n,s]],[/((pebble))app\/[\d\.]+\s/i],[r,e,[n,h]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[r,e,[n,s]],[/crkey/i],[[e,"Chromecast"],[r,"Google"]],[/android.+;\s(glass)\s\d/i],[e,[r,"Google"],[n,h]],[/android.+;\s(pixel c)\s/i],[e,[r,"Google"],[n,c]],[/android.+;\s(pixel xl|pixel)\s/i],[e,[r,"Google"],[n,s]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[e,/_/g," "],[r,"Xiaomi"],[n,s]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[e,/_/g," "],[r,"Xiaomi"],[n,c]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[e,[r,"Meizu"],[n,c]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[e,[r,"OnePlus"],[n,s]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[e,[r,"RCA"],[n,c]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[e,[r,"Dell"],[n,c]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[e,[r,"Verizon"],[n,c]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[r,"Barnes & Noble"],e,[n,c]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[e,[r,"NuVision"],[n,c]],[/android.+;\s(k88)\sbuild/i],[e,[r,"ZTE"],[n,c]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[e,[r,"Swiss"],[n,s]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[e,[r,"Swiss"],[n,c]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[e,[r,"Zeki"],[n,c]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[r,"Dragon Touch"],e,[n,c]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[e,[r,"Insignia"],[n,c]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[e,[r,"NextBook"],[n,c]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[r,"Voice"],e,[n,s]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[r,"LvTel"],e,[n,s]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[e,[r,"Envizen"],[n,c]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[r,e,[n,c]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[e,[r,"MachSpeed"],[n,c]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[r,e,[n,c]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[e,[r,"Rotor"],[n,c]],[/android.+(KS(.+))\s+build/i],[e,[r,"Amazon"],[n,c]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[r,e,[n,c]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[n,v.lowerize],r,e],[/(android[\w\.\s\-]{0,9});.+build/i],[e,[r,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[o,[t,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[t,o],[/rv\:([\w\.]{1,9}).+(gecko)/i],[o,t]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[t,o],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[t,[o,p.str,y.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[t,"Windows"],[o,p.str,y.os.windows.version]],[/\((bb)(10);/i],[[t,"BlackBerry"],o],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[t,o],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[t,"Symbian"],o],[/\((series40);/i],[t],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[t,"Firefox OS"],o],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[t,o],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[t,"Chromium OS"],o],[/(sunos)\s?([\w\.\d]*)/i],[[t,"Solaris"],o],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[t,o],[/(haiku)\s(\w+)/i],[t,o],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[o,/_/g,"."],[t,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[t,"Mac OS"],[o,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[t,o]]},m=function(e,t){if("object"==typeof e&&(t=e,e=f),!(this instanceof m))return new m(e,t).getResult();var n=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),r=t?v.extend(g,t):g;return this.getBrowser=function(){var e={name:f,version:f};return p.rgx.call(e,n,r.browser),e.major=v.major(e.version),e},this.getCPU=function(){var e={architecture:f};return p.rgx.call(e,n,r.cpu),e},this.getDevice=function(){var e={vendor:f,model:f,type:f};return p.rgx.call(e,n,r.device),e},this.getEngine=function(){var e={name:f,version:f};return p.rgx.call(e,n,r.engine),e},this.getOS=function(){var e={name:f,version:f};return p.rgx.call(e,n,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};m.VERSION="0.7.18",m.BROWSER={NAME:t,MAJOR:"major",VERSION:o},m.CPU={ARCHITECTURE:a},m.DEVICE={MODEL:e,VENDOR:r,TYPE:n,CONSOLE:u,MOBILE:s,SMARTTV:l,TABLET:c,WEARABLE:h,EMBEDDED:"embedded"},m.ENGINE={NAME:t,VERSION:o},m.OS={NAME:t,VERSION:o},_.exports&&(E=_.exports=m),E.UAParser=m;var b=i&&(i.jQuery||i.Zepto);if(void 0!==b){var w=new m;b.ua=w.getResult(),b.ua.get=function(){return w.getUA()},b.ua.set=function(e){w.setUA(e);var t=w.getResult();for(var n in t)b.ua[n]=t[n]}}}("object"==typeof window?window:e)}).UAParser;var wi=function(e,t,n){t in e?l.f(e,t,E(0,n)):e[t]=n};x(x.S+x.F*!dr(function(e){}),"Array",{from:function(e){var t,n,r,i,o=B(e),a="function"==typeof this?this:Array,u=arguments.length,s=1<u?arguments[1]:void 0,c=void 0!==s,l=0,f=un(o);if(c&&(s=b(s,2<u?arguments[2]:void 0,2)),null==f||a==Array&&jn(f))for(n=new a(t=ce(o.length));l<t;l++)wi(n,l,c?s(o[l],l):o[l]);else for(i=f.call(o),n=new a;!(r=i.next()).done;l++)wi(n,l,c?Tn(i,s,[r.value,l],!0):r.value);return n.length=l,n}});var _i=y.Array.from,Ei=n(function(e){e.exports={default:_i,__esModule:!0}}),ki=t(Ei),xi=t(n(function(e,t){t.__esModule=!0;var n,r=(n=Ei)&&n.__esModule?n:{default:n};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,r.default)(e)}}));var Oi=function(o){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(e,t,n){e[t]=n};return function e(t,n,r){if(ri(t)||oi(t)){for(var i in n=hi(n)?oi(t)?{}:[]:n,t)a(n,i,e(t[i],n[i],i));return n}return o(t,n,r)}}(function(e){return e});function Si(e){if(hi(e))throw new TypeError("deepClone only accept non primitive type");return Oi(e)}function Pi(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length<2)throw new Error("deepAssign accept two and more argument");for(var r=t.length-1;-1<r;r--)if(hi(t[r]))throw new TypeError("deepAssign only accept non primitive type");var i=t.shift();return t.forEach(function(e){return Oi(e,i)}),i}function Ti(e,i){return e.replace(/(^|[^a-zA-Z]+)([a-zA-Z])/g,function(e,t,n,r){return i||0!==r?n.toUpperCase():n.toLowerCase()})}function Ai(r,i){return r.bind?r.bind(i):r.apply?function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.apply(i,t)}:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.call.apply(r,[i].concat(xi(t)))}}var Li="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window);function ji(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(e,t){return+e-+t};return gn(n).sort(e).reduce(function(e,t){return e.concat(n[t])},[])}function Mi(o){for(var e=arguments.length,a=Array(1<e?e-1:0),t=1;t<e;t++)a[t-1]=arguments[t];return new Nr(function(r,i){!function e(t){if(!(t>=o.length)){var n=ii(o[t])?o[t].apply(o,xi(a)):o[t];return!1===n?i("stop"):Nr.resolve(n).then(function(){return e(t+1)}).catch(function(e){return i(e||"stop")})}r()}(0)})}function Ci(n){for(var e=arguments.length,r=Array(1<e?e-1:0),t=1;t<e;t++)r[t-1]=arguments[t];return function e(t){return t>=n.length||!1!==(ii(n[t])?n[t].apply(n,xi(r)):n[t])&&e(++t)}(0)}Li&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),Li&&(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame);var Ni=Qt(null);function Ii(e,t){var n=e.__evt_id;n||(Object.defineProperty(e,"__evt_id",{writable:!0,enumerable:!1,configurable:!0}),n=e.__evt_id=++Ni.count);var r=n+"_"+t,i=Ni[r];return i||(i=Ni[r]=[]),i}function Fi(r,i,o){var a=3<arguments.length&&void 0!==arguments[3]&&arguments[3],e=arguments[4];ii(a)&&!e&&(e=a,a=void 0);var t=[o,void 0,a];a&&!e&&(e=function(){zi(r,i,o,a);for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.apply(r,t)}),e&&(t[1]=e),Ii(r,i).push(t)}function zi(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=Ii(e,t);if(n||r){var o=-1,a=void 0;return i.find(function(e,t){if((!n||e[0]===n)&&(!r||e[2]))return o=t,a=e[1],!0}),-1!==o&&i.splice(o,1),a}i.length=0}Ni.count=0;var Ri=function(){function r(t,e){var n=this;if($t(this,r),Object.defineProperty(this,"__target",{writable:!0,enumerable:!1,configurable:!0}),this.__target=this,t){if("object"!==(void 0===t?"undefined":Rt(t)))throw new Error("CusEvent target are not object");this.__target=t,e&&["on","once","off","emit"].forEach(function(e){t[e]=n[e]})}}return Kt(r,[{key:"on",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return Fi(this.__target,e,t,n),this}},{key:"once",value:function(e,t){return this.on(e,t,!0)}},{key:"off",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return zi(this.__target,e,t,n),this}},{key:"emit",value:function(e,t){var n,r,i,o;return n=this.__target,r=e,i={data:t},(o=Qt(null)).type=r,o.target=n,i&&$r(o,oi(i)?i:{data:i}),Ii(n,r).forEach(function(e){(e[1]||e[0]).apply(n,[o])}),this}}]),r}(),$i=Li?document.createElement("div"):{},Vi="innerText";"textContent"in $i&&(Vi="textContent");var Di=Array.prototype;function Ki(e,t){return e.getAttribute(t)}function Bi(e,t,n){void 0===n?e.removeAttribute(t):e.setAttribute(t,n)}function Gi(t,e){if(e&&(e=e.trim())){var n=e.split(/\s+/);if(t.classList)n.forEach(function(e){return t.classList.add(e)});else{var r=" "+(t.className||"")+" ";n.forEach(function(e){-1===r.indexOf(" "+e+" ")&&(r+=" "+e)}),t.className=r.trim()}}}var Wi=!1;try{var qi=Object.defineProperty({},"passive",{get:function(){Wi=!0}});Li&&window.addEventListener("test",null,qi)}catch(e){console.error(e)}function Ui(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=4<arguments.length&&void 0!==arguments[4]&&arguments[4];if(void 0!==i&&!fi(i)&&Wi&&(i={passive:!0}),r){var o=zi(e,t+"_once",n);o&&(n=o)}e.removeEventListener(t,n,i)}function Hi(r,i,o){var a=3<arguments.length&&void 0!==arguments[3]&&arguments[3],u=4<arguments.length&&void 0!==arguments[4]&&arguments[4];if(void 0!==u&&!fi(u)&&Wi&&(u={passive:!0}),a){var s=o;Fi(r,i+"_once",s,o=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];s.apply(this,t),Ui(r,i,o,a,u)})}r.addEventListener(i,o,u)}function Yi(i,o,e,a){var t=4<arguments.length&&void 0!==arguments[4]&&arguments[4];void 0!==t&&!fi(t)&&Wi&&(t={passive:!0});var n=function(e){var n=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=arguments[2],r=arguments[3],i=[];n&&i.push(e);for(;e&&e.parentNode!==t;)(e=e.parentNode)&&i.push(e);r&&i.push(t);return i}(e.target||e.srcElement,i,!0),t=Ji(o,i,!0),r=void 0;t.find?r=t.find(function(t){return n.find(function(e){return t===e})}):t.forEach(function(t){return!r&&n.forEach(function(e){r||t!==e||(r=e)})}),r&&a.apply(r,arguments)};Fi(i,e+"_delegate_"+o,a,n),i.addEventListener(e,n,t)}function Qi(e,t){return(e.currentStyle||document.defaultView.getComputedStyle(e,null))[t]||e.style[t]}function Zi(e,t,n){if(oi(t))for(var r in t)Zi(e,r,t[r]);else e.style[t]=n}function Ji(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document,n=arguments[2],r=t.querySelectorAll(e);return n?ki(r):r}var Xi=function(){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;$t(this,r);var n=void 0;(this.selector=e)&&e.constructor===NodeList?n=ki(e):ri(e)?n=e:li(e)?0===e.indexOf("<")?($i.innerHTML=e,n=Ji("*",$i,!0)):n=Ji(e,t,!0):n=[e],$r(this,n),this.length=n.length}return Kt(r,[{key:"each",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Di.forEach.apply(this,t),this}},{key:"push",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Di.push.apply(this,t),this}},{key:"splice",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return eo(Di.splice.apply(this,t))}},{key:"find",value:function(t){var n=[];this.each(function(e){n=n.concat(Ji(t,e,!0))});var e=eo(n);return e.parent=this,e.selector=t,e}},{key:"append",value:function(e){var t=eo(e),n=this[0];return t.each(function(e){return n.appendChild(e)}),this}},{key:"appendTo",value:function(e){return eo(e).append(this),this}},{key:"text",value:function(t){return 0===arguments.length?this[0][Vi]:this.each(function(e){e[Vi]=t})}},{key:"html",value:function(t){return 0===arguments.length?this[0].innerHTML:this.each(function(e){e.innerHTML=t})}},{key:"attr",value:function(t,n){return 1===arguments.length?Ki(this[0],t):this.each(function(e){return Bi(e,t,n)})}},{key:"data",value:function(t,n){return 0===arguments.length?this[0].dataset||{}:1===arguments.length?(this[0].dataset||{})[t]:this.each(function(e){(e.dataset||(e.dataset={}))[t]=n})}},{key:"css",value:function(t,n){return 1!==arguments.length||oi(t)?this.each(function(e){return Zi(e,t,n)}):Qi(this[0],t)}},{key:"addClass",value:function(t){return this.each(function(e){return Gi(e,t)})}},{key:"removeClass",value:function(t){return this.each(function(e){return function(t,e){if(e&&(e=e.trim())){var n=e.split(/\s+/);if(t.classList)n.forEach(function(e){return t.classList.remove(e)});else{var r=" "+t.className+" ";n.forEach(function(e){for(var t=" "+e+" ";-1!==r.indexOf(t);)r=r.replace(t," ")}),t.className=r.trim()}}}(e,t)})}},{key:"hasClass",value:function(e){return t=this[0],new RegExp("(?:^|\\s)"+e+"(?=\\s|$)").test(t.className);var t}},{key:"on",value:function(t,n){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return this.each(function(e){return Hi(e,t,n,r,i)})}},{key:"off",value:function(t,n){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return this.each(function(e){return Ui(e,t,n,r,i)})}},{key:"delegate",value:function(t,n,r){var i=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return this.each(function(e){return Yi(e,t,n,r,i)})}},{key:"undelegate",value:function(t,n,r){var i=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return this.each(function(e){return function(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]&&arguments[4];void 0!==i&&!fi(i)&&Wi&&(i={passive:!0});var o=zi(e,n+"_delegate_"+t,r);o&&e.removeEventListener(n,o,i)}(e,t,n,r,i)})}},{key:"remove",value:function(){return this.each(function(e){var t;(t=e).parentNode.removeChild(t)})}}]),r}();function eo(e,t){return e.constructor===Xi?e:new Xi(e,t)}var to=0,no=function(e){function i(e,t,n){$t(this,i);var r=Vt(this,(i.__proto__||ne(i)).call(this));if(!pi(e))throw new Error("You must pass in an legal video element but not "+(void 0===e?"undefined":Rt(e)));return r.video=e,r.config=t,r.customConfig=n,r}return Zt(i,Ri),Kt(i,null,[{key:"isSupport",value:function(){return!0}}]),Kt(i,[{key:"load",value:function(e){this.video.setAttribute("src",e),this.video.src=e}},{key:"startLoad",value:function(e){var t=this.video.currentTime||to;this.load(e),this.seek(t)}},{key:"stopLoad",value:function(){to=this.video.currentTime,this.video.src="",this.video.removeAttribute("src")}},{key:"destroy",value:function(){pi(this.video)&&this.stopLoad()}},{key:"play",value:function(){return this.video.play()}},{key:"pause",value:function(){return this.video.pause()}},{key:"refresh",value:function(){this.video.src=this.config.src}},{key:"attachMedia",value:function(){}},{key:"seek",value:function(e){this.video.currentTime=e}}]),i}(),ro={flv:".flv",hls:".m3u8",native:".mp4"};function io(e){var t=e.src,n=e.box;if(li(n)&&n)return n;for(var r in t=t.toLowerCase(),ro){var i=ro[r];if(-1<t.indexOf(i))return r}return"native"}var oo=function(){function n(e,t){if($t(this,n),!pi(e))throw new Error("You must pass in an video element to the chimee-kernel");this.config=t,this.videoElement=e,this.initVideoKernel()}return Kt(n,[{key:"destroy",value:function(){this.videoKernel.destroy()}},{key:"initVideoKernel",value:function(){var e=this.config,t=io(e);this.box=t;var n=this.chooseVideoKernel(this.box,e.preset);if(!ii(n))throw new Error("We can't find video kernel for "+t+". Please check your config and make sure it's installed or provided");var r=e.presetConfig[this.box];r&&Pi(e,r),this.videoKernel=new n(this.videoElement,e,r)}},{key:"chooseVideoKernel",value:function(e,t){switch(e){case"native":return no;case"mp4":return this.getMp4Kernel(t.mp4);case"flv":case"hls":return t[e];default:throw new Error("We currently do not support box "+e+", please contact us through https://github.com/Chimeejs/chimee/issues.")}}},{key:"getMp4Kernel",value:function(e){var t=e&&ii(e.isSupport);return t&&e.isSupport()?e:(t&&bi.warn("chimee","mp4 decode is not support in this browser, we will switch to the native video kernel"),this.box="native",no)}},{key:"attachMedia",value:function(){this.videoKernel.attachMedia()}},{key:"load",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.config.src;this.config.src=e,this.videoKernel.load(e)}},{key:"startLoad",value:function(){if(!ii(this.videoKernel.startLoad))throw new Error("This video kernel do not support startLoad, please contact us on https://github.com/Chimeejs/chimee/issues");this.videoKernel.startLoad(this.config.src)}},{key:"stopLoad",value:function(){ii(this.videoKernel.stopLoad)&&this.videoKernel.stopLoad()}},{key:"play",value:function(){this.videoKernel.play()}},{key:"pause",value:function(){this.videoKernel.pause()}},{key:"seek",value:function(e){ai(e)?this.videoKernel.seek(e):bi.error("chimee","When you try to seek, you must offer us a number, but not "+(void 0===e?"undefined":Rt(e)))}},{key:"refresh",value:function(){this.videoKernel.refresh()}},{key:"on",value:function(e,t){this.videoKernel.on(e,t)}},{key:"off",value:function(e,t){this.videoKernel.off(e,t)}},{key:"currentTime",get:function(){return this.videoElement.currentTime||0}}]),n}(),ao=p.Reflect,uo=ao&&ao.ownKeys||function(e){var t=Xe.f(v(e)),n=Qe.f;return n?t.concat(n(e)):t};x(x.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=C(e),i=F.f,o=uo(r),a={},u=0;o.length>u;)void 0!==(n=i(r,t=o[u++]))&&wi(a,t,n);return a}});var so=y.Object.getOwnPropertyDescriptors,co=t(n(function(e){e.exports={default:so,__esModule:!0}})),lo=y.Object.getOwnPropertySymbols,fo=t(n(function(e){e.exports={default:lo,__esModule:!0}}));z("getOwnPropertyNames",function(){return rt.f});var ho=y.Object,vo=function(e){return ho.getOwnPropertyNames(e)},po=t(n(function(e){e.exports={default:vo,__esModule:!0}}));function yo(r,i){return r.bind?r.bind(i):r.apply?function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.apply(i,t)}:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.call.apply(r,[i].concat(xi(t)))}}function go(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=n.throwError,i=void 0!==r&&r,o=n.backup;if(li(t)&&(t=t.split(".")),!ri(t))throw new TypeError("keys of getDeepProperty must be string or Array<string>");for(var a=[],u=e,s=0,c=t.length;s<c;s++){var l=t[s];if(ni(u)){if(i)throw new Error("obj"+(0<a.length?"."+a.join("."):" itself")+" is "+u);return o}u=u[l],a.push(l)}return u}var mo=Oe("species"),bo=function(e,t){return Ze(n=e)&&("function"!=typeof(r=n.constructor)||r!==Array&&!Ze(r.prototype)||(r=void 0),f(r)&&null===(r=r[mo])&&(r=void 0)),new(void 0===r?Array:r)(t);var n,r},wo=function(f,e){var d=1==f,h=2==f,v=3==f,p=4==f,y=6==f,g=5==f||y,m=e||bo;return function(e,t,n){for(var r,i,o=B(e),a=L(o),u=b(t,n,3),s=ce(a.length),c=0,l=d?m(e,s):h?m(e,0):void 0;c<s;c++)if((g||c in a)&&(i=u(r=a[c],c,o),f))if(d)l[c]=i;else if(i)switch(f){case 3:return!0;case 5:return r;case 6:return c;case 2:l.push(r)}else if(p)return!1;return y?-1:v||p?p:l}},_o=function(e,t){if(!f(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e},Eo=Ue.getWeak,ko=wo(5),xo=wo(6),Oo=0,So=function(e){return e._l||(e._l=new Po)},Po=function(){this.a=[]},To=function(e,t){return ko(e.a,function(e){return e[0]===t})};Po.prototype={get:function(e){var t=To(this,e);if(t)return t[1]},has:function(e){return!!To(this,e)},set:function(e,t){var n=To(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(t){var e=xo(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}};var Ao={getConstructor:function(e,n,r,i){var o=e(function(e,t){Pn(e,o,n,"_i"),e._t=n,e._i=Oo++,e._l=void 0,null!=t&&Mn(t,r,e[i],e)});return rr(o.prototype,{delete:function(e){if(!f(e))return!1;var t=Eo(e);return!0===t?So(_o(this,n)).delete(e):t&&m(t,this._i)&&delete t[this._i]},has:function(e){if(!f(e))return!1;var t=Eo(e);return!0===t?So(_o(this,n)).has(e):t&&m(t,this._i)}}),o},def:function(e,t,n){var r=Eo(v(t),!0);return!0===r?So(e).set(t,n):r[e._i]=n,e},ufstore:So},Lo=l.f,jo=wo(0),Mo=function(n,e,t,r,i,o){var a=p[n],u=a,s=i?"set":"add",c=u&&u.prototype,l={};return h&&"function"==typeof u&&(o||c.forEach&&!d(function(){(new u).entries().next()}))?(u=e(function(e,t){Pn(e,u,n,"_c"),e._c=new a,null!=t&&Mn(t,i,e[s],e)}),jo("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(r){var i="add"==r||"set"==r;r in c&&(!o||"clear"!=r)&&k(u.prototype,r,function(e,t){if(Pn(this,u,r),!i&&o&&!f(e))return"get"==r&&void 0;var n=this._c[r](0===e?0:e,t);return i?this:n})}),o||Lo(u.prototype,"size",{get:function(){return this._c.size}})):(u=r.getConstructor(e,n,i,s),rr(u.prototype,t),Ue.NEED=!0),Te(u,n),l[n]=u,x(x.G+x.W+x.F,l),o||r.setStrong(u,n,i),u},Co=(n(function(e){var o,t=wo(0),n="WeakMap",r=Ue.getWeak,a=Object.isExtensible,i=Ao.ufstore,u={},s=function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},c={get:function(e){if(f(e)){var t=r(e);return!0===t?i(_o(this,n)).get(e):t?t[this._i]:void 0}},set:function(e,t){return Ao.def(_o(this,n),e,t)}},l=e.exports=Mo(n,s,c,Ao,!0,!0);d(function(){return 7!=(new l).set((Object.freeze||Object)(u),7).get(u)})&&(o=Ao.getConstructor(s,n),zr(o.prototype,c),Ue.NEED=!0,t(["delete","has","get","set"],function(r){var e=l.prototype,i=e[r];ae(e,r,function(e,t){if(f(e)&&!a(e)){this._f||(this._f=new o);var n=this._f[r](e,t);return"set"==r?this:n}return i.call(this,e,t)})}))}),function(e){x(x.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})});Co("WeakMap");var No=function(e){x(x.S,e,{from:function(e){var t,n,r,i,o=arguments[1];return a(this),(t=void 0!==o)&&a(o),null==e?new this:(n=[],t?(r=0,i=b(o,arguments[2],2),Mn(e,!1,function(e){n.push(i(e,r++))})):Mn(e,!1,n.push,n),new this(n))}})};No("WeakMap");var Io=y.WeakMap,Fo=t(n(function(e){e.exports={default:Io,__esModule:!0}})),zo=t(n(function(e,t){t.__esModule=!0;var n,r=(n=P)&&n.__esModule?n:{default:n};t.default=function(e,t,n){return t in e?(0,r.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}})),Ro=Ue.onFreeze;z("preventExtensions",function(t){return function(e){return t&&f(e)?t(Ro(e)):e}});var $o=y.Object.preventExtensions;t(n(function(e){e.exports={default:$o,__esModule:!0}}));var Vo=K;function Do(e){if(!e||!e.hasOwnProperty)return!1;for(var t=["value","initializer","get","set"],n=0,r=t.length;n<r;n++)if(e.hasOwnProperty(t[n]))return!0;return!1}function Ko(e){return!!e&&(ii(e.get)||ii(e.set))&&fi(e.configurable)&&fi(e.enumerable)&&void 0===e.writable}function Bo(e){return!!e&&ii(e.initializer)&&fi(e.configurable)&&fi(e.enumerable)&&fi(e.writable)}function Go(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"You must pass me an array of function";if(!ri(e)||e.length<1)throw new TypeError(r);if(1===e.length){if(!ii(e[0]))throw new TypeError(r);return e[0]}return e.reduce(function(t,n){if(!ii(n)||!ii(t))throw new TypeError(r);return function(e){return yo(n,this)(yo(t,this)(e))}})}function Wo(e){if(ii(console.warn))return console.warn(e);console.log(e)}var qo,Uo,Ho=(qo=po,ii(Uo=fo)?function(e){return ki(qo(e).concat(Uo(e)))}:qo);var Yo=ii(co)?co:function(n){return Ho(n).reduce(function(e,t){return e[t]=Vo(n,t),e},{})};function Qo(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)throw new TypeError("You must pass in decorators in compressMultipleDecorators");return t.forEach(function(e){if(!ii(e))throw new TypeError('Decorators must be a function, but not "'+e+'" in '+(void 0===e?"undefined":Rt(e)))}),1===t.length?t[0]:function(n,r,e){return t.reduce(function(e,t){return t(n,r,e)},e)}}function Zo(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},w=e.get,_=e.set,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.preGet,E=void 0!==n&&n,r=t.preSet,k=void 0===r||r;if(!(ii(w)||ii(_)||ri(w)&&0<w.length||ri(_)&&0<_.length))throw new TypeError("@accessor need a getter or setter. If you don't need to add setter/getter. You should remove @accessor");var i="@accessor only accept function or array of function as getter/setter";return w=ri(w)?Go(w,i):w,_=ri(_)?Go(_,i):_,function(e,t,n){var r=n||{},i=r.configurable,o=void 0===i||i,a=r.enumerable,u=void 0===a||a,s=ii(w),c=ii(_),l=function(e){return s?yo(w,this)(e):e},f=function(e){return c?yo(_,this)(e):e};if(Ko(n)){var d=n.get,h=n.set,v=ii(d),p=ii(h);return!v&&s&&Wo("You are trying to set getter via @accessor on "+t+" without getter. That's not a good idea."),!p&&c&&Wo("You are trying to set setter via @accessor on  "+t+" without setter. That's not a good idea."),{get:v||s?function(){var e=this,t=yo(l,this),n=function(){return v?yo(d,e)():void 0};return(E?[t,n]:[n,t]).reduce(function(e,t){return t(e)},void 0)}:void 0,set:p||c?function(e){var t=this,n=yo(f,this),r=function(e){return p?yo(h,t)(e):e};return(k?[n,r]:[r,n]).reduce(function(e,t){return t(e)},e)}:void 0,configurable:o,enumerable:u}}if(Bo(n)){var y=n.initializer,g=void 0,m=!1;return{get:function(){var e=yo(l,this);return m||(g=yo(y,this)(),m=!0),e(g)},set:function(e){var t=yo(f,this);return g=k?t(e):e,m=!0,k||t(g),g},configurable:o,enumerable:u}}var b=(n||{}).value;return{get:function(){return yo(l,this)(b)},set:function(e){var t=yo(f,this);return b=k?t(e):e,k||t(b),b},configurable:o,enumerable:u}}}function Jo(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];if(0===s.length)throw new Error("@before accept at least one parameter. If you don't need to preprocess before your function, do not add @before decorators");if(2<s.length&&Do(s[2]))throw new Error("You may use @before straightly, @before return decorators, you should call it before you set it as decorator.");for(var n=s.length-1;-1<n;n--)if(!ii(s[n]))throw new TypeError("@before only accept function parameter");return function(e,t,n){var r=n||{},o=r.value,i=r.configurable,a=r.enumerable,u=r.writable;if(!ii(o))throw new TypeError('@before can only be used on function, please check the property "'+t+'" is a method or not.');return{value:function(){for(var r=this,e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=s.reduce(function(e,t){var n=yo(t,r).apply(void 0,xi(e));return void 0===n?e:ri(n)?n:[n]},t);return yo(o,this).apply(void 0,xi(i))},configurable:i,enumerable:a,writable:u}}}function Xo(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("@initialize accept at least one parameter. If you don't need to initialize your value, do not add @initialize.");if(2<t.length&&Do(t[2]))throw new Error("You may use @initialize straightly, @initialize return decorators, you need to call it");var o=Go(t,"@initialize only accept function parameter");return function(e,t,n){if(void 0===n)return{value:yo(o,e)(),configurable:!0,writable:!0,enumerable:!0};if(Ko(n)){var r=!1;return Zo({get:function(e){return r?e:yo(o,this)(e)},set:n.set?function(e){return r=!0,e}:void 0})(e,t,n)}if(Bo(n)){var i=n.initializer;return{initializer:function(){return yo(o,this)(yo(i,this)())},configurable:n.configurable,writable:n.writable,enumerable:n.enumerable}}return{value:yo(o,this)(n.value),writable:n.writable,configurable:n.configurable,enumerable:n.enumerable}}}var ea=K,ta=M;function na(t,n,e,r,i,o){var a=e.configurable,u=e.enumerable,s=o.force,c=o.omit,l=ea(r,i);if(void 0!==l){if(c)return;if(!s)throw new Error('"'+n+'" is an existing property, if you want to override it, please set "force" true in @alias option.');if(!l.configurable)throw new Error('property "'+n+'" is unconfigurable.')}ta(r,i,{get:function(){return t[n]},set:function(e){return t[n]=e,n},configurable:a,enumerable:u})}function ra(c,l,e){if(2===arguments.length?li(c)&&(e=l,l=c,c=void 0):1===arguments.length&&(l=c,c=void 0),!li(l))throw new TypeError("@alias need a string as a key to find the porperty to set alias on");var f="If you want to use @alias to set alias on other instance, you must pass in a legal instance";if(void 0!==c&&hi(c))throw new TypeError(f);var t=oi(e)?e:{force:!1,omit:!1},d=t.force,h=t.omit;return function(e,i,o){function a(e,t,n){var r=hi(e)?t:e,i=n.split("."),o=i.slice(-1),a=fn(o,1)[0];if(hi(r=go(r,i.slice(0,-1),{throwError:!0})))throw new TypeError(f);return{target:r,name:a}}if(Bo(o=o||{value:void 0,configurable:!0,writable:!0,enumerable:!0}))return Xo(function(e){var t=a(c,this,l),n=t.target,r=t.name;return na(this,i,o,n,r,{force:d,omit:h}),e})(e,i,o);if(Ko(o)){var u=void 0,t=function(e){if(u)return e;var t=a(c,this,l),n=t.target,r=t.name;return na(this,i,o,n,r,{force:d,omit:h}),u=!0,e};return Zo({get:t,set:t})(e,i,o)}var n=a(c,e,l),r=n.target,s=n.name;return na(e,i,o,r,s,{force:d,omit:h}),o}}var ia=M;var oa=function(d){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},h=e.requirement,t=e.customArgs,v=void 0!==t&&t;return function(){for(var e=arguments.length,o=Array(1<e?e-1:0),t=1;t<e;t++)o[t-1]=arguments[t];var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=n.exclude,a=void 0===r?[]:r,i=n.include,u=void 0===i?[]:i,s=n.construct,c=void 0!==s&&s,l=n.self,f=void 0!==l&&l;if(!ri(a))throw new TypeError("options.exclude must be an array");if(!ri(u))throw new TypeError("options.include must be an array");return function(e){var n=ii(e);if(!f&&!n)throw new TypeError("@"+d.name+"Class can only be used on class");if(f&&hi(e))throw new TypeError("@"+d.name+"Class must be used on non-primitive type value in 'self' mode");var r=f?e:e.prototype;if(ni(r))throw new Error("The prototype of the "+e.name+" is empty, please check it");var i=Yo(r);Ho(r).concat(u).forEach(function(e){var t=i[e];"constructor"===e&&!c||f&&n&&-1<["name","length","prototype"].indexOf(e)||-1<a.indexOf(e)||ii(h)&&!1===h(r,e,t,{self:f})||ia(r,e,(v?d.apply(void 0,xi(o)):d)(r,e,t))})}}}(ua,{requirement:function(e,t,n){return!!(r=n)&&r.hasOwnProperty("value")&&fi(r.configurable)&&fi(r.enumerable)&&fi(r.writable)&&ii(n.value);var r}}),aa=void 0;function ua(t,n,e){if(1===arguments.length)return oa()(t);var r=e||{},i=r.value,o=r.configurable;if(!ii(i))throw new TypeError('@autobind can only be used on functions, not "'+i+'" in '+(void 0===i?"undefined":Rt(i))+' on property "'+n+'"');var a,u=t.constructor;return{configurable:o,enumerable:!1,get:function(){var r=this,e=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.call.apply(i,[r].concat(xi(t)))};return this===t?i:this.constructor!==u&&ne(this).constructor===u?i:this.constructor!==u&&n in this.constructor.prototype?function(e,t){if(void 0===Fo)throw new Error("Using @autobind on "+t.name+"() requires WeakMap support due to its use of super."+t.name+"()");aa||(aa=new Fo),!1===aa.has(e)&&aa.set(e,new Fo);var n=aa.get(e);return!1===n.has(t)&&n.set(t,yo(t,e)),n.get(t)}(this,i):(M(this,n,{configurable:!0,writable:!0,enumerable:!1,value:e}),e)},set:(a=n,function(e){return M(this,a,{configurable:!0,writable:!0,enumerable:!0,value:e}),e})}}var sa=M;function ca(e,t,n){if(void 0===n)return Wo("You are using @frozen on an undefined property. This property will become a frozen undefined forever, which is meaningless"),{value:void 0,writable:!1,enumerable:!1,configurable:!1};if(n.enumerable=!1,n.configurable=!1,Ko(n)){var r=n.get;return n.set=void 0,ii(r)?{get:function(){var e=yo(r,this)();return sa(this,t,{value:e,writable:!1,configurable:!1,enumerable:!1}),e},set:void 0,configurable:!1,enumerable:!1}:void Wo("You are using @frozen on one accessor descriptor without getter. This property will become a frozen undefined finally.Which maybe meaningless.")}return n.writable=!1,n}var la=K,fa=M;function da(e,t,n){return void 0===n?{value:void 0,enumerable:!1,configurable:!0,writable:!0}:(n.enumerable=!1,n)}var ha=M,va=K;function pa(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=n.self,i=void 0!==r&&r,o=n.omit,a=void 0!==o&&o,u=ii(t);if(u||ri(t)){if(!ii(e))throw new TypeError("If you want to decorator class, you must pass it a legal class");if(u)t(e);else for(var s=0,c=t.length;s<c;s++){var l=t[s];if(!ii(l))throw new TypeError("If you want to decorate an class, you must pass it function or array of function");l(e)}return e}if(!i&&!ii(e))throw new TypeError("applyDecorators only accept class as first arguments. If you want to modify instance, you should set options.self true.");if(i&&hi(e))throw new TypeError("We can't apply docorators on a primitive value, even in self mode");if(!oi(t))throw new TypeError("applyDecorators only accept object as second arguments");var f=i?e:e.prototype;if(ni(f))throw new Error("The class muse have a prototype, please take a check");for(var d in t){var h=t[d],v=ri(h)?h:[h],p=void 0;try{p=Qo.apply(void 0,xi(v))}catch(e){throw Wo(e&&e.message),new Error("The decorators set on props must be Function or Array of Function")}var y=va(f,d);if(!y||y.configurable)ha(f,d,p(f,d,y));else if(!a)throw new Error(d+" of "+f+" is unconfigurable")}return e}var ya=["push","pop","unshift","shift","splice","sort","reverse"];function ga(e,o,t){var n,a=t.diff,u=t.operationPrefix,s={},c=!1,r=new Proxy(e,{get:function(e,t,n){var r=e[t];if(ri(e)&&-1<ya.indexOf(t))return function(){c=!0,yo(r,n).apply(void 0,arguments),c=!1,o()};if(!0===s[t])return r;if(oi(r)||ri(r)){var i=s[t]||ga(r,o,{diff:a,operationPrefix:u});return s[t]=i}return s[t]=!0,r},set:function(e,t,n){var r=e[t],i=oi(n)||ri(n)?ga(n,o,{diff:a,operationPrefix:u}):n;return e[t]=i,s[t]=!0,c||a&&r===i||o(),!0},deleteProperty:function(e,t){return delete e[t],delete s[t],c||o(),!0}}),i=(zo(n={},u+"set",[Xo(function(e){return function(e,t){r[e]=t}}),da]),zo(n,u+"del",[Xo(function(e){return function(e){delete r[e]}}),da]),n);return pa(r,i,{self:!0}),r}function ma(u,r,e){var t,s=this,i=e.operationPrefix,o=e.diff,a={},c=!1;function l(e){var n=void 0;return e.reduce(function(e,t){return e[t]=[Zo({set:function(e){return n=this[t],e}}),Zo({get:function(e){return a[t]||((oi(e)||ri(e))&&ma(e,r,{operationPrefix:i,diff:o}),a[t]=!0),e},set:function(e){return(oi(e)||ri(e))&&ma(e,r,{operationPrefix:i,diff:o}),a[t]=!0,c||o&&n===e||r(),e}},{preSet:!1})],e},{})}var n=l(Ho(u));if(pa(u,n,{self:!0,omit:!0}),ri(u)){var f=ya.reduce(function(e,n){return e[n]=[Xo(function(t){return t=ii(t)?t:Array.prototype[n],function(){var n=u.length;if(c=!0,yo(t,u).apply(void 0,arguments),c=!1,n<u.length){var e=l(new Array(u.length-n).fill(1).map(function(e,t){return(t+n).toString()}));pa(u,e,{self:!0,omit:!0})}r()}}),da],e},{});pa(u,f,{self:!0})}var d=(zo(t={},i+"set",[Xo(function(a){return function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=n.disable,i=n.isNewVal;if(i=i||-1===Ho(u).indexOf(e),ii(a)&&yo(a,s)(e,t,{disable:!0,isNewVal:i}),i){var o=l([e]);pa(u,o,{self:!0,omit:!0})}r||(u[e]=t)}}),da]),zo(t,i+"del",[Xo(function(t){return function(e){ii(t)?yo(t,s)(e):delete u[e],r()}}),da]),t);return pa(u,d,{self:!0}),u}function ba(u){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s=e.other,c=e.backup;if(!ii(u)&&!li(u))throw new TypeError("@runnable only accept Function or String");return function(e,t,n){var r=n||{},i=r.value,o=r.configurable;if(!ii(i))throw new TypeError("@runnable can only be used on method, but not "+i+' on property "'+t+'".');var a=ii(u)?u:function(){var e=u.split(".");return go(hi(s)?this:s,e)};return c=ii(c)?c:function(){},{value:function(){return!0===yo(a,this).apply(void 0,arguments)?yo(i,this).apply(void 0,arguments):yo(c,this).apply(void 0,arguments)},enumerable:!1,configurable:o,writable:!1}}}function wa(e,t,n){return void 0===n?{value:void 0,enumerable:!0,configurable:!0,writable:!0}:(n.configurable=!0,n)}function _a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=li(t[0])?t.shift():"";return t.unshift(function(e){return li(e)?e:r}),Zo({set:t,get:t})}function Ea(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!!fi(t[0])&&t.shift();return t.unshift(function(e){return fi(e)?e:r}),Zo({set:t,get:t})}function ka(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=ai(t[0])?t.shift():0;return t.unshift(function(e){return ai(e)?e:r}),Zo({set:t,get:t})}var xa=y.JSON||(y.JSON={stringify:JSON.stringify}),Oa=function(e){return xa.stringify.apply(xa,arguments)},Sa=t(n(function(e){e.exports={default:Oa,__esModule:!0}})),Pa=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","interruptbegin","interruptend","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","enterpictureinpicture","leavepictureinpicture"],Ta=["buffered","currentSrc","duration","error","ended","networkState","paused","readyState","seekable","sinkId","controlsList","tabIndex","dataset","offsetHeight","offsetLeft","offsetParent","offsetTop","offsetWidth"],Aa=["beforeinput","blur","click","compositionend","compositionstart","compositionupdate","dblclick","focus","focusin","focusout","input","keydown","keypress","keyup","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","resize","scroll","select","wheel","mousewheel","contextmenu","touchstart","touchmove","touchend","fullscreen"],La=["fullscreenchange"],ja=["wheel","mousewheel","touchstart","touchmove"],Ma=["silentLoad","fullscreen"],Ca=["mouseenter","mouseleave"],Na=["play","pause","seek","startLoad","stopLoad"],Ia={load:"load",enterpictureinpicture:"requestPictureInPicture",leavepictureinpicture:"exitPictureInPicture"},Fa=["mediaInfo","heartbeat","error"],za=["focus","fullscreen","requestFullscreen","exitFullscreen"],Ra=["canPlayType","captureStream","setSinkId"];function $a(e,t){if(!li(e))throw new TypeError("key parameter must be String");if(!ii(t))throw new TypeError("fn parameter must be Function")}function Va(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 2<t.length?["set"].concat(t):2===t.length?-1<["video","container","wrapper","videoElement"].indexOf(t[0])?["get"].concat(t):["set","container"].concat(t):["get","container"].concat(t)}x(x.S,"Number",{isNaN:function(e){return e!=e}});var Da,Ka,Ba,Ga,Wa,qa,Ua,Ha,Ya,Qa,Za=y.Number.isNaN,Ja=t(n(function(e){e.exports={default:Za,__esModule:!0}}));function Xa(e,t,n,r){n&&M(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function eu(n,r,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(n,r,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(n,r,o),o=null),o}function tu(e){return li(e)?e:void 0}function nu(t){return Zo({get:function(e){return this.dispatcher.videoConfigReady&&this.inited?this.dom.videoElement[t]:e},set:function(e){return this.dispatcher.videoConfigReady?this.dom.videoElement[t]=e:e}})}function ru(e){var t=oi(e)?e:{set:e,get:e,isBoolean:!1},n=t.set,r=t.get,i=t.isBoolean;return Zo({get:function(e){return this.dispatcher.videoConfigReady&&this.inited?this.dom.videoElement[r]:e},set:function(e){if(!this.dispatcher.videoConfigReady)return e;var t=i?e?"":void 0:null===e?void 0:e;return this.dom.setAttr("video",n,t),e}},{preSet:!1})}function iu(n,r){return Zo({get:function(e){var t=this.dom.getAttr("video",n);return this.dispatcher.videoConfigReady&&this.inited?r?!!t:t:e},set:function(e){if(!this.dispatcher.videoConfigReady)return e;var t=r?e||void 0:null===e?void 0:e;return this.dom.setAttr("video",n,t),e}})}function ou(i){return Zo({get:function(e){if(!this.dispatcher.videoConfigReady||!this.inited)return e;var t,n=this.dom.getAttr("video",i),r=this.dom.videoElement[i];return!ri(t=n)&&0<=t-ei(t)+1&&ai(r)?r:n||void 0},set:function(e){if(!this.dispatcher.videoConfigReady)return e;var t=void 0;return void 0===e||ai(e)?t=e:li(e)&&!Ja(parseFloat(e))&&(t=e),this.dom.setAttr("video",i,t),t}})}var au,uu,su,cu,lu,fu,du,hu,vu,pu,yu,gu,mu,bu,wu,_u,Eu,ku,xu,Ou,Su,Pu={src:[_a(),Zo({set:function(e){return this.dispatcher.readySync&&this.autoload&&e!==this.src&&(this.needToLoadSrc=!0),e}}),Zo({set:function(e){return this.needToLoadSrc&&(this.needToLoadSrc=!1,this.dispatcher.binder.emit({name:"load",target:"plugin",id:"dispatcher"},e)),e}},{preSet:!1})],autoload:Ea(),autoplay:[Ea(),nu("autoplay")],controls:[Ea(),nu("controls")],width:[ou("width")],height:[ou("height")],crossOrigin:[Zo({set:tu}),ru({set:"crossorigin",get:"crossOrigin"})],loop:[Ea(),nu("loop")],defaultMuted:[Ea(),ru({get:"defaultMuted",set:"muted",isBoolean:!0})],muted:[Ea(),nu("muted")],preload:[Zo({set:function(e){return-1<["none","auto","metadata",""].indexOf(e)?e:"none"}},{preSet:!0}),ru("preload")],poster:[_a(),Zo({get:function(e){return this.dispatcher.videoConfigReady&&this.inited?this.dom.videoElement.poster:e},set:function(e){return this.dispatcher.videoConfigReady&&e.length&&this.dom.setAttr("video","poster",e),e}})],playsInline:[Zo({get:function(e){var t=this.dom.videoElement.playsInline;return this.dispatcher.videoConfigReady&&this.inited?void 0===t?e:t:e},set:function(e){if(!this.dispatcher.videoConfigReady)return e;var t=(this.dom.videoElement.playsInline=e)?"":void 0;return this.dom.setAttr("video","playsinline",t),this.dom.setAttr("video","webkit-playsinline",t),this.dom.setAttr("video","x5-playsinline",t),e}}),Ea()],x5VideoPlayerFullscreen:[Zo({set:function(e){return!!e},get:function(e){return!!e}}),iu("x5-video-player-fullscreen",!0)],x5VideoOrientation:[Zo({set:tu}),iu("x5-video-orientation")],x5VideoPlayerType:[Zo({set:function(e){if(!this.dispatcher.videoConfigReady)return e;var t="h5"===e?"h5":void 0;return this.dom.setAttr("video","x5-video-player-type",t),e},get:function(e){return this.dispatcher.videoConfigReady&&e||(this.dom.getAttr("video","x5-video-player-type")?"h5":void 0)}})],xWebkitAirplay:[Zo({set:function(e){return!!e},get:function(e){return!!e}}),iu("x-webkit-airplay",!0)],playbackRate:[ka(1),nu("playbackRate")],defaultPlaybackRate:[nu("defaultPlaybackRate"),ka(1)],disableRemotePlayback:[Ea(),nu("disableRemotePlayback")],volume:[ka(1),nu("volume")]},Tu=(Da=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!!fi(t[0])&&t.shift();return t.unshift(function(e){return fi(e)?e:r}),Xo.apply(void 0,t)}(),Ka=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=li(t[0])?t.shift():"";return t.unshift(function(e){return li(e)?e:r}),Xo.apply(void 0,t)}(function(e){return e.toLocaleLowerCase()}),Ba=function(){function n(e,t){$t(this,n),Xa(this,"needToLoadSrc",Ga,this),Xa(this,"changeWatchable",Wa,this),Xa(this,"inited",qa,this),this.src="",Xa(this,"isLive",Ua,this),Xa(this,"box",Ha,this),this.preset={},this.presetConfig={},this.autoload=!0,this.autoplay=!1,this.controls=!1,this.width="100%",this.height="100%",this.crossOrigin=void 0,this.loop=!1,this.defaultMuted=!1,this.muted=!1,this.preload="auto",this.poster=void 0,this.playsInline=!1,this.x5VideoPlayerFullscreen=!1,this.x5VideoOrientation=void 0,this.x5VideoPlayerType=void 0,this.xWebkitAirplay=!1,this.playbackRate=1,this.defaultPlaybackRate=1,this.disableRemotePlayback=!1,this.volume=1,Xa(this,"_kernelProperty",Ya,this),Xa(this,"_realDomAttr",Qa,this),pa(this,Pu,{self:!0}),Object.defineProperty(this,"dispatcher",{value:e,enumerable:!1,writable:!1,configurable:!1}),Object.defineProperty(this,"dom",{value:e.dom,enumerable:!1,writable:!1,configurable:!1}),Pi(this,t)}return Kt(n,[{key:"init",value:function(){var t=this;this._realDomAttr.forEach(function(e){t[e]=t[e]}),this.inited=!0}}]),n}(),Ga=eu(Ba.prototype,"needToLoadSrc",[da],{enumerable:!0,initializer:function(){return!1}}),Wa=eu(Ba.prototype,"changeWatchable",[da],{enumerable:!0,initializer:function(){return!0}}),qa=eu(Ba.prototype,"inited",[da],{enumerable:!0,initializer:function(){return!1}}),Ua=eu(Ba.prototype,"isLive",[Da,wa],{enumerable:!0,initializer:function(){return!1}}),Ha=eu(Ba.prototype,"box",[Ka,wa],{enumerable:!0,initializer:function(){return""}}),Ya=eu(Ba.prototype,"_kernelProperty",[ca],{enumerable:!0,initializer:function(){return["isLive","box","preset","kernels","presetConfig"]}}),Qa=eu(Ba.prototype,"_realDomAttr",[ca],{enumerable:!0,initializer:function(){return["src","controls","width","height","crossOrigin","loop","muted","preload","poster","autoplay","playsInline","x5VideoPlayerFullscreen","x5VideoOrientation","xWebkitAirplay","playbackRate","defaultPlaybackRate","autoload","disableRemotePlayback","defaultMuted","volume","x5VideoPlayerType"]}}),Ba);function Au(n,r,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(n,r,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(n,r,o),o=null),o}var Lu,ju,Mu,Cu,Nu,Iu,Fu,zu,Ru=(au=oa(),uu=ra("silentLoad"),su=ra("fullScreen"),cu=ra("$fullScreen"),lu=ra("fullscreen"),fu=ra("emit"),du=ra("emitSync"),hu=ra("on"),vu=ra("addEventListener"),pu=Jo($a),yu=ra("off"),gu=ra("removeEventListener"),mu=Jo($a),bu=ra("once"),wu=Jo($a),_u=ra("css"),Eu=Jo(Va),ku=ra("attr"),xu=Jo(Va),au((Au((Su=function(){function e(){$t(this,e),this.__events={},this.__unwatchHandlers=[]}return Kt(e,[{key:"__wrapAsVideo",value:function(n){var r=this;Ta.forEach(function(e){M(r,e,{get:function(){return this.__dispatcher.dom.videoElement[e]},set:void 0,configurable:!1,enumerable:!1})}),Ra.forEach(function(t){M(r,t,{get:function(){var e=this.__dispatcher.dom.videoElement;return Ai(e[t],e)},set:void 0,configurable:!1,enumerable:!1})}),pa(this,n._realDomAttr.concat(n._kernelProperty).reduce(function(e,t){return e[t]=[Zo({get:function(){return n[t]},set:function(e){return n[t]=e}}),da],e},{}),{self:!0}),Na.forEach(function(o){M(r,o,{value:function(){for(var r=this,e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return new Nr(function(e){var t,n=r.__id;r.__dispatcher.binder.once({id:n,name:"_"+o,fn:e}),(t=r.__dispatcher.binder)[/^(seek)$/.test(o)?"emitSync":"emit"].apply(t,[{target:"video",name:o,id:n}].concat(xi(i)))})},configurable:!0,enumerable:!1,writable:!0})}),za.forEach(function(t){"fullscreen"!==t&&M(r,t,{value:function(){var e;return(e=this.__dispatcher.dom)[t].apply(e,arguments)},configurable:!0,enumerable:!1,writable:!0})})}},{key:"$watch",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=r.deep,o=r.diff,a=void 0===o||o,u=r.other,s=r.proxy,c=void 0!==s&&s;if(!li(e)&&!ri(e))throw new TypeError("$watch only accept string and Array<string> as key to find the target to spy on, but not "+e+", whose type is "+(void 0===e?"undefined":Rt(e)));var l=!0,f=function e(){l=!1;var t=n.__unwatchHandlers.indexOf(e);-1<t&&n.__unwatchHandlers.splice(t,1)},d=li(e)?e.split("."):e,h=d.pop(),v=this.__dispatcher.videoConfig;return pa(0===d.length&&!u&&-1<v._realDomAttr.indexOf(h)?v:-1<["isFullscreen","fullscreenElement"].indexOf(h)?this.__dispatcher.dom:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=n.throwError,i=void 0!==r&&r,o=n.backup;if(li(t)&&(t=t.split(".")),!ri(t))throw new TypeError("keys of getDeepProperty must be string or Array<string>");for(var a=[],u=e,s=0,c=t.length;s<c;s++){var l=t[s];if(ni(u)){if(i)throw new Error("obj"+(0<a.length?"."+a.join("."):" itself")+" is "+u);return o}u=u[l],a.push(l)}return u}(u||this,d,{throwError:!0}),zo({},h,function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var r=oi(n[n.length-1])?n[n.length-1]:{},f=r.deep,d=r.omit,h=r.other,i=r.operationPrefix,v=void 0===i?"__":i,o=r.diff,p=void 0===o||o,y=r.proxy;if("function"!=typeof Proxy&&(y=!1,Wo("You browser do not support Proxy, we will fall back into observe mode.")),!n.length)throw new TypeError("You must pass a function or a string to find the hanlder function.");if(void 0!==h&&hi(h))throw new TypeError("If you want us to trigger function on the other instance, you must pass in a legal instance");if(!li(v))throw new TypeError("operationPrefix must be an string");return function(i,r,e){var o=n.reduce(function(e,r,t){if(!li(r)&&!ii(r)){if(!t||t!==n.length-1)throw new TypeError("You can only pass function or string as handler");return e}return e.push(li(r)?function(e,t){var n=go(h||i,r);if(ii(n))return yo(n,this)(e,t);if(!d)throw new Error("You pass in a function for us to trigger, please ensure the property to be a function or set omit flag true")}:r),e},[]),a=function(t,n){var r=this;o.forEach(function(e){return yo(e,r)(t,n)})},u=!1,s=void 0,c=void 0,l=void 0;return Qo(Zo({set:function(e){var t=this;s=this[r],l=void 0;var n=function(){return yo(a,t)(c,s)};return f&&(oi(e)||ri(e))?y?ga(e,n,{diff:p,operationPrefix:v}):ma(e,n,{operationPrefix:v,diff:p}):e},get:function(e){var t=this;if(l)return l;if(!u){u=!0;var n=function(){return yo(a,t)(c,s)};if(f&&(oi(e)||ri(e))){if(y)return l=ga(e,n,{diff:p,operationPrefix:v}),c=s=l;ma(e,n,{operationPrefix:v,diff:p})}c=s=e}return e}},{preSet:!0}),Zo({set:function(e){return c=e,p&&s===e||yo(a,this)(c,s),s=e}},{preSet:!1}))(i,r,e)}}(function(){!l||this instanceof Tu&&!this.dispatcher.changeWatchable||Ai(t,this).apply(void 0,arguments)},{deep:i,diff:a,proxy:c})),{self:!0}),this.__unwatchHandlers.push(f),f}},{key:"$set",value:function(e,t,n){if(!oi(e)&&!ri(e))throw new TypeError("$set only support Array or Object, but not "+e+", whose type is "+(void 0===e?"undefined":Rt(e)));if(!ii(e.__set))return bi.warn("chimee",Sa(e)+" has not been deep watch. There is no need to use $set."),void(e[t]=n);e.__set(t,n)}},{key:"$del",value:function(e,t){if(!oi(e)&&!ri(e))throw new TypeError("$del only support Array or Object, but not "+e+", whose type is "+(void 0===e?"undefined":Rt(e)));if(!ii(e.__del))return bi.warn("chimee",Sa(e)+" has not been deep watch. There is no need to use $del."),void delete e[t];e.__del(t)}},{key:"load",value:function(){for(var n=this,e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return new Nr(function(e){var t;n.__dispatcher.binder.once({id:n.__id,name:"_load",target:"plugin",fn:e}),(t=n.__dispatcher.binder).emit.apply(t,[{name:"load",target:"plugin",id:n.__id}].concat(r))})}},{key:"$silentLoad",value:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.__dispatcher.binder.emit({name:"silentLoad",target:"video",id:this.__id}).then(function(){var e;return(e=t.__dispatcher).silentLoad.apply(e,n)}).then(function(e){t.__dispatcher.binder.trigger({name:"silentLoad",target:"video",id:t.__id},e)})}},{key:"$fullscreen",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"container";if(!this.__dispatcher.binder.emitSync({name:"fullscreen",id:this.__id,target:"video-dom"},e,t))return!1;var n=this.__dispatcher.dom.fullscreen(e,t);return this.__dispatcher.binder.triggerSync({name:"fullscreen",id:this.__id,target:"video-dom"},e,t),n}},{key:"$emit",value:function(e){var t,n=void 0;if(oi(e)&&li(e.name)&&li(e.target)&&(n=e.target,e=e.name),!li(e))throw new TypeError("emit key parameter must be String");-1<Aa.indexOf(e.replace(/^\w_/,""))&&bi.warn("plugin","You are try to emit "+e+" event. As emit is wrapped in Promise. It make you can't use event.preventDefault and event.stopPropagation. So we advice you to use emitSync");for(var r=arguments.length,i=Array(1<r?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return(t=this.__dispatcher.binder).emit.apply(t,[{name:e,id:this.__id,target:n}].concat(xi(i)))}},{key:"$emitSync",value:function(e){var t,n=void 0;if(oi(e)&&li(e.name)&&li(e.target)&&(n=e.target,e=e.name),!li(e))throw new TypeError("emitSync key parameter must be String");for(var r=arguments.length,i=Array(1<r?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return(t=this.__dispatcher.binder).emitSync.apply(t,[{name:e,id:this.__id,target:n}].concat(xi(i)))}},{key:"$on",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=$r({},n,{name:e,id:this.__id,fn:t});this.__dispatcher.binder.on(r),this.__addEvents(e,t)}},{key:"$off",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=$r({},n,{name:e,id:this.__id,fn:t});this.__dispatcher.binder.off(r),this.__removeEvents(e,t)}},{key:"$once",value:function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=this,i=function e(){Ai(n,this).apply(void 0,arguments),r.__removeEvents(t,e)};r.__addEvents(t,i);var o=$r({},e,{name:t,id:this.__id,fn:i});this.__dispatcher.binder.once(o)}},{key:"$css",value:function(e){for(var t,n=arguments.length,r=Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this.__dispatcher.dom)[e+"Style"].apply(t,r)}},{key:"$attr",value:function(e){for(var t,n=arguments.length,r=Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if("set"===e&&/video/.test(r[0])){if(!this.__dispatcher.videoConfigReady)return bi.warn("chimee",this.__id+" is tring to set attribute on video before video inited. Please wait until the inited event has benn trigger"),r[2];if(-1<this.__dispatcher.videoConfig._realDomAttr.indexOf(r[1])){var o=r[1],a=r[2];return this.__dispatcher.videoConfig[o]=a}}return(t=this.__dispatcher.dom)[e+"Attr"].apply(t,r)}},{key:"requestPictureInPicture",value:function(){return this.__dispatcher.binder.emit({target:"video",name:"enterpictureinpicture",id:this.__id})}},{key:"exitPictureInPicture",value:function(){return this.__dispatcher.binder.emit({target:"video",name:"leavepictureinpicture",id:this.__id})}},{key:"__addEvents",value:function(e,t){this.__events[e]=this.__events[e]||[],this.__events[e].push(t)}},{key:"__removeEvents",value:function(e,t){if(!si(this.__events[e])){var n=this.__events[e].indexOf(t);n<0||(this.__events[e].splice(n,1),si(this.__events[e])&&delete this.__events[e])}}},{key:"__destroy",value:function(){var n=this;this.__unwatchHandlers.forEach(function(e){return e()}),gn(this.__events).forEach(function(t){ri(n.__events[t])&&n.__events[t].forEach(function(e){return n.$off(t,e)})}),delete this.__events}},{key:"currentTime",get:function(){return this.__dispatcher.kernel.currentTime},set:function(e){this.__dispatcher.binder.emitSync({name:"seek",target:"video",id:this.__id},e)}},{key:"inPictureInPictureMode",get:function(){return this.__dispatcher.inPictureInPictureMode}},{key:"pictureInPictureWindow",get:function(){return window.__chimee_picture_in_picture_window}},{key:"$plugins",get:function(){return this.__dispatcher.plugins}},{key:"$pluginOrder",get:function(){return this.__dispatcher.order}},{key:"$wrapper",get:function(){return this.__dispatcher.dom.wrapper}},{key:"$container",get:function(){return this.__dispatcher.dom.container}},{key:"$video",get:function(){return this.__dispatcher.dom.videoElement}},{key:"isFullscreen",get:function(){return this.__dispatcher.dom.isFullscreen}},{key:"fullscreenElement",get:function(){return this.__dispatcher.dom.fullscreenElement}},{key:"container",get:function(){return this.__dispatcher.containerConfig},set:function(e){if(!oi(e))throw new Error("The config of container must be Object, but not "+(void 0===e?"undefined":Rt(e))+".");return Pi(this.__dispatcher.containerConfig,e),this.__dispatcher.container}},{key:"videoRequireGuardedAttributes",get:function(){return this.__dispatcher.dom.videoRequireGuardedAttributes}}]),e}()).prototype,"$silentLoad",[uu],K(Su.prototype,"$silentLoad"),Su.prototype),Au(Su.prototype,"$fullscreen",[su,cu,lu],K(Su.prototype,"$fullscreen"),Su.prototype),Au(Su.prototype,"$emit",[fu],K(Su.prototype,"$emit"),Su.prototype),Au(Su.prototype,"$emitSync",[du],K(Su.prototype,"$emitSync"),Su.prototype),Au(Su.prototype,"$on",[hu,vu,pu],K(Su.prototype,"$on"),Su.prototype),Au(Su.prototype,"$off",[yu,gu,mu],K(Su.prototype,"$off"),Su.prototype),Au(Su.prototype,"$once",[bu,wu],K(Su.prototype,"$once"),Su.prototype),Au(Su.prototype,"$css",[_u,Eu],K(Su.prototype,"$css"),Su.prototype),Au(Su.prototype,"$attr",[ku,xu],K(Su.prototype,"$attr"),Su.prototype),Au(Su.prototype,"inPictureInPictureMode",[da],K(Su.prototype,"inPictureInPictureMode"),Su.prototype),Au(Su.prototype,"pictureInPictureWindow",[da],K(Su.prototype,"pictureInPictureWindow"),Su.prototype),Au(Su.prototype,"$plugins",[da],K(Su.prototype,"$plugins"),Su.prototype),Au(Su.prototype,"$pluginOrder",[da],K(Su.prototype,"$pluginOrder"),Su.prototype),Au(Su.prototype,"$wrapper",[da],K(Su.prototype,"$wrapper"),Su.prototype),Au(Su.prototype,"$container",[da],K(Su.prototype,"$container"),Su.prototype),Au(Su.prototype,"$video",[da],K(Su.prototype,"$video"),Su.prototype),Ou=Su))||Ou),$u=oa()(Lu=function(e){function j(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.name,n=e.level,i=void 0===n?0:n,o=e.operable,a=void 0===o||o,u=e.beforeCreate,s=e.create,c=e.init,l=e.inited,f=e.destroy,d=e.events,h=void 0===d?{}:d,v=e.data,p=void 0===v?{}:v,y=e.computed,g=void 0===y?{}:y,m=e.methods,b=void 0===m?{}:m,w=e.el,_=e.penetrate,E=void 0!==_&&_,k=e.inner,x=void 0===k||k,O=e.autoFocus,S=e.className,P=arguments[1],T=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{name:r};$t(this,j);var A=Vt(this,(j.__proto__||ne(j)).call(this));if(A.destroyed=!1,A.VERSION="0.11.0",A.__operable=!0,A.__level=0,si(P))throw bi.error("Dispatcher.plugin","lack of dispatcher. Do you forget to pass arguments to super in plugin?"),new TypeError("lack of dispatcher");if(!li(t))throw new TypeError("id of PluginConfig must be string");A.__id=t,A.__dispatcher=P,A.$videoConfig=A.__dispatcher.videoConfig,A.__wrapAsVideo(A.$videoConfig),A.beforeCreate=A.beforeCreate||u;try{ii(A.beforeCreate)&&A.beforeCreate({events:h,data:p,computed:g,methods:b},T)}catch(e){A.$throwError(e)}if(!si(b)&&oi(b)&&gn(b).forEach(function(e){var t=b[e];if(!ii(t))throw new TypeError("plugins methods must be Function");M(A,e,{value:Ai(t,A),writable:!0,enumerable:!1,configurable:!0})}),!si(h)&&oi(h)&&gn(h).forEach(function(e){if(!ii(h[e]))throw new TypeError("plugins events hook must bind with Function");A.$on(e,h[e])}),!si(p)&&oi(p)&&Pi(A,p),!si(g)&&oi(g)){var L=gn(g).reduce(function(e,t){var n=g[t];return ii(n)?e[t]=Zo({get:n}):oi(n)&&(ii(n.get)||ii(n.set))?e[t]=Zo(n):bi.warn("Dispatcher.plugin","Wrong computed member '"+t+"' defination in Plugin "+r),e},{});pa(A,L,{self:!0})}A.create=A.create||s,A.init=A.init||c,A.inited=A.inited||l,A.destroy=A.destroy||f,A.$dom=A.__dispatcher.dom.insertPlugin(A.__id,w,{penetrate:E,inner:x,className:S}),A.$autoFocus=fi(O)?O:x,A.$inner=x,A.$penetrate=E,pa(A,{$inner:ca,$penetrate:ca},{self:!0}),A.$operable=fi(T.operable)?T.operable:a,A.__level=ui(T.level)?T.level:i,A.$config=T;try{ii(A.create)&&A.create()}catch(e){A.$throwError(e)}return A}return Zt(j,Ru),Kt(j,[{key:"__init",value:function(e){try{ii(this.init)&&this.init(e)}catch(e){this.$throwError(e)}}},{key:"__inited",value:function(){var t=this,e=void 0;try{e=ii(this.inited)&&this.inited()}catch(e){this.$throwError(e)}return this.readySync=!di(e),this.ready=this.readySync?Nr.resolve(this):e.then(function(){return t.readySync=!0,t}).catch(function(e){return gi(e)?t.$throwError(e):Nr.reject(e)}),this.readySync?this:this.ready}},{key:"$bumpToTop",value:function(){var e=this.__dispatcher._getTopLevel(this.$inner);this.$level=e+1}},{key:"$throwError",value:function(e){this.__dispatcher.throwError(e)}},{key:"$destroy",value:function(){this.destroyed||(ii(this.destroy)&&this.destroy(),Dt(j.prototype.__proto__||ne(j.prototype),"__destroy",this).call(this),this.__dispatcher.dom.removePlugin(this.__id),delete this.__dispatcher,delete this.$dom,this.destroyed=!0)}},{key:"$operable",set:function(e){fi(e)&&(this.$dom.style.pointerEvents=e?"auto":"none",this.__operable=e)},get:function(){return this.__operable}},{key:"$level",set:function(e){ui(e)&&(this.__level=e,this.__dispatcher._sortZIndex())},get:function(){return this.__level}},{key:"$autoFocus",get:function(){return this.__autoFocus},set:function(e){this.__autoFocus=e,this.__dispatcher.dom._autoFocusToVideo(this.$dom,!e)}}]),j}())||Lu,Vu=["","o","ms","moz","webkit","webkitCurrent"],Du=[["",""],["exit","cancel"],["screen","Screen"]],Ku={position:"fixed",zIndex:"2147483647",left:0,top:0,right:0,bottom:0,overflow:"hidden",width:"100%",height:"100%"},Bu=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Gu=["fullscreenerror","webkitfullscreenerror","mozfullscreenerror","MSFullscreenError"],Wu="undefined"!=typeof document;function qu(e,t,n){if(oi(t))for(var r in t)qu(e,r,t[r]);else e.style[t]=n}function Uu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};oi(t)&&(n=t),li(e)&&(t=e);var r=n.keyOnly,i=void 0!==r&&r;if(!Wu)return i?"":void 0;if(pi(e)||(e=document),!li(t))throw new Error("You must pass in a string as name, but not "+(void 0===t?"undefined":Rt(t))+".");for(var o=0;o<Du.length;o++){t=t.replace(Du[o][0],Du[o][1]);for(var a=0;a<Vu.length;a++){var u=0===a?t:Vu[a]+t.charAt(0).toUpperCase()+t.substr(1);if(void 0!==e[u])return i?u:e[u]}}return i?"":void 0}function Hu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=n.bubbles,i=void 0===r||r,o=n.cancelable,a=void 0===o||o,u=void 0;if(ii(Event)?u=new Event(t,{bubbles:i,cancelable:a}):Wu&&document.createEvent?(u=document.createEvent("HTMLEvents")).initEvent(t,!0,!0):Wu&&document.createEventObject&&((u=document.createEventObject()).eventType=t,u.eventName=t),!oi(u)&&!ci(u))throw new Error("We can't create an object on this browser, please report to author");e.dispatchEvent?e.dispatchEvent(u):e.fireEvent?e.fireEvent("on"+u.eventType,u):e[t]?e[t]():e["on"+t]&&e["on"+t]()}function Yu(n,r,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(n,r,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(n,r,o),o=null),o}var Qu,Zu,Ju,Xu,es,ts,ns,rs=Uu("fullscreenEnabled"),is=!1,os=new(ju=oa(),Mu=ra("requestFullscreen"),Cu=ra("exitFullscreen"),Nu=ra("addEventListener"),Iu=ra("removeEventListener"),ju((Yu((zu=function(){function e(){$t(this,e),this._fullscreenElement=null,this.isNativelySupport=ti(Uu("fullscreenElement"))&&(!ti(rs)||!0===rs),this._openKey=Wu?Uu(document.body||document.documentElement,"requestFullscreen",{keyOnly:!0}):"",this._exitKey=Uu("exitFullscreen",{keyOnly:!0}),this._useStyleFirst=!1,this.hasUsedStyle=!1}return Kt(e,[{key:"open",value:function(n){var e=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).force,t=void 0!==e&&e;if(!pi(n))throw new Error("You should passed in a legal element to requestFullScreen, but not "+(void 0===n?"undefined":Rt(n))+".");if(!yi(document,n))throw new Error("You must pass in a HTML element in document.");var r=this.fullscreenElement;if(r&&r!==n){if(!t)return Hu(document,"fullscreenerror"),!1;this.exit()}if(!this.useStyleFirst){if(this.isNativelySupport)return ii(n[this._openKey])&&n[this._openKey](),!0;if(n instanceof HTMLVideoElement&&n.webkitSupportsFullscreen&&ii(n.webkitEnterFullscreen))return n.webkitEnterFullscreen(),this._fullscreenElement=n,!0}return this._savedStyles=gn(Ku).reduce(function(e,t){return e[t]=n.style[t],e},{}),qu(n,Ku),document.body&&(this._bodyOverflow=document.body.style.overflow,document.body.style.overflow="hidden"),document.documentElement&&(this._htmlOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden"),this._fullscreenElement=n,this.hasUsedStyle=!0,Hu(n,"fullscreenchange"),!0}},{key:"exit",value:function(){if(!this.isFullscreen)return!1;if(this.isNativelySupport&&!this.useStyleFirst&&!this.hasUsedStyle)return document[this._exitKey](),!0;var e=this._fullscreenElement;return qu(e,this._savedStyles),document.body&&(document.body.style.overflow=this._bodyOverflow),document.documentElement&&(document.documentElement.style.overflow=this._htmlOverflow),this._fullscreenElement=null,this._savedStyles={},Hu(e,"fullscreenchange"),!0}},{key:"on",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document;this._handleEvent(n,"addEventListener",e,t)}},{key:"off",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document;this._handleEvent(n,"removeEventListener",e,t)}},{key:"_handleEvent",value:function(t,n,e,r){if("fullscreenchange"!==e&&"fullscreenerror"!==e&&"esfullscreenmethodchange"!==e)throw new Error(this.constructor.name+' only handle "fullscreenchange", "fullscreenerror" and "esfullscreenmethodchange" event, but not '+e+". Pleas pass in an right event name.");if(!ii(r))throw new Error("You must pass in an legal function, but not "+(void 0===r?"undefined":Rt(r))+".");if(!pi(t)&&t!==document)throw new Error("You should passed in a legal element, but not "+(void 0===t?"undefined":Rt(t))+".");("fullscreenchange"===e?Bu:"fullscreenerror"===e?Gu:[e]).forEach(function(e){t[n](e,r)})}},{key:"useStyleFirst",get:function(){return is},set:function(e){return(e=!!e)===is||(is=e,Hu(document,"esfullscreenmethodchange")),e}},{key:"fullscreenElement",get:function(){return["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].reduce(function(e,t){return e||document[t]},null)||this._fullscreenElement}},{key:"isFullscreen",get:function(){return pi(this.fullscreenElement)}}]),e}()).prototype,"open",[Mu],K(zu.prototype,"open"),zu.prototype),Yu(zu.prototype,"exit",[Cu],K(zu.prototype,"exit"),zu.prototype),Yu(zu.prototype,"on",[Nu],K(zu.prototype,"on"),zu.prototype),Yu(zu.prototype,"off",[Iu],K(zu.prototype,"off"),zu.prototype),Fu=zu))||Fu);function as(n,r,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(n,r,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(n,r,o),o=null),o}function us(e){if("video"===e&&(e="videoElement"),!pi(this[e]))throw new TypeError('Your target "'+e+'" is not a legal HTMLElement');for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return[e].concat(n)}function ss(e,t,n){if(!li(t))throw new TypeError("to handle dom's attribute or style, your attr parameter must be string, but not "+t+" in "+(void 0===t?"undefined":Rt(t)));if(!li(e))throw new TypeError("to handle dom's attribute or style, your target parameter must be string, , but not "+e+" in "+(void 0===e?"undefined":Rt(e)));return[e,t,n]}var cs,ls=(Qu=function(l){var f=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).other;if(!ii(l)&&!di(l)&&!li(l))throw new TypeError("@waitUntil only accept Function, Promise or String");return function(e,t,n){var r=n||{},a=r.value,i=r.configurable;if(!ii(a))throw new TypeError("@waituntil can only be used on function, but not "+a+' on property "'+t+'"');var u=!1,s=[],c=di(l)?function(){return l}:ii(l)?l:function(){var e=l.split("."),t=e.slice(-1),n=hi(f)?this:f;if(!u){var r=go(n,e.slice(0,-1));if(ni(r))return r;var i=la(r,t),o=function(e){if(!0===e)for(;0<s.length;)s[0](),s.shift();return e},a=Do(i)?Zo({set:o})(r,t,i):Zo({set:o})(r,t,{value:void 0,configurable:!0,enumerable:!0,writable:!0});fa(r,t,a),u=!0}return go(n,e)};return{value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=yo(a,this),o=yo(c,this).apply(void 0,n);return di(o)?Nr.resolve(o).then(function(){return yo(a,e).apply(void 0,n)}):!0===o?yo(a,this).apply(void 0,n):new Nr(function(e){s.push(function(){i.apply(void 0,n),e()})})},enumerable:!1,configurable:i,writable:!1}}}("__dispatcher.videoConfigReady"),Zu=Jo(ss,us),Ju=Jo(ss,us),Xu=Jo(ss,us),es=Jo(ss,us),ts=Jo(us),as((ns=function(){function a(e,t){$t(this,a),this.plugins={},this.originHTML="",this.__mouseInVideo=!1,this.destroyed=!1,this.__videoExtendedNodes=[],this.isFullscreen=!1,this.fullscreenElement=void 0;var n=(e||{}).wrapper;if(this.__dispatcher=t,!pi(n)&&!li(n))throw new TypeError("Wrapper can only be string or HTMLElement, but not "+(void 0===n?"undefined":Rt(n)));var r=eo(n);if(0===r.length)throw new TypeError("Can not get dom node accroding wrapper. Please check your wrapper");this.wrapper=r[0],this.originHTML=this.wrapper.innerHTML;var i=r.find("video")[0];i||(i=document.createElement("video")),this.installVideo(i),this._fullscreenMonitor(),os.on("fullscreenchange",this._fullscreenMonitor);var o=ri(e.videoRequiredGuardedAttributes)?e.videoRequiredGuardedAttributes:[];o.indexOf("style")<0&&o.unshift("style"),this.videoRequireGuardedAttributes=o}return Kt(a,[{key:"mouseInVideo",get:function(){return this.__mouseInVideo},set:function(e){this.__mouseInVideo=!!e}},{key:"videoExtendedNodes",get:function(){return this.__videoExtendedNodes}}]),Kt(a,[{key:"installVideo",value:function(e){if(this.__videoExtendedNodes.push(e),Bi(e,"tabindex",-1),this._autoFocusToVideo(e),pi(this.container)){var t=this.container;0===t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[0])}else e.parentElement&&pi(e.parentElement)&&e.parentElement!==this.wrapper?this.container=e.parentElement:(this.container=document.createElement("container"),eo(this.container).append(e));return this.container.parentElement!==this.wrapper&&eo(this.wrapper).append(this.container),this.videoElement=e}},{key:"removeVideo",value:function(){var e=this.videoElement;return this._autoFocusToVideo(this.videoElement,!1),this.__dispatcher.binder&&this.__dispatcher.binder.bindEventOnVideo(e,!0),eo(e).remove(),delete this.videoElement,e}},{key:"insertPlugin",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(!li(e))throw new TypeError("insertPlugin id parameter must be string");if(pi(this.plugins[e])&&(bi.warn("Dispatcher.dom","Plugin "+e+" have already had a dom node. Now it will be replaced"),this.removePlugin(e)),li(t))if(/<[^>]+?>/.test(t)){var r=document.createElement("div");r.innerHTML=t,t=r.children[0]}else t=document.createElement(Ti(t).replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()}));else oi(t)&&(n=t);var i=n,o=i.inner,a=i.penetrate,u=n.className,s=t&&pi(t)?t:document.createElement("div");ri(u)&&(u=u.join(" ")),li(u)&&Gi(s,u),this.plugins[e]=s;var c=o?this.container:this.wrapper,l=o?this.videoElement:this.container;return a&&(this.__dispatcher.binder.bindEventOnPenetrateNode(s),this.__videoExtendedNodes.push(s)),c.lastChild===l?c.appendChild(s):c.insertBefore(s,l.nextSibling),s}},{key:"removePlugin",value:function(e){if(li(e)){var t=this.plugins[e];pi(t)&&(t.parentNode&&t.parentNode.removeChild(t),this._autoFocusToVideo(t,!0));var n=(uc.getPluginConfig(e)||{}).penetrate;void 0!==n&&n&&this.__dispatcher.binder.bindEventOnPenetrateNode(t,!0),delete this.plugins[e]}}},{key:"setPluginsZIndex",value:function(e){var n=this;e.forEach(function(e,t){return Zi(e.match(/^(videoElement|container)$/)?n[e]:n.plugins[e],"z-index",++t)})}},{key:"setAttr",value:function(e,t,n){Bi(this[e],t,n)}},{key:"getAttr",value:function(e,t){return Ki(this[e],t)}},{key:"setStyle",value:function(e,t,n){Zi(this[e],t,n)}},{key:"getStyle",value:function(e,t){return Qi(this[e],t)}},{key:"requestFullscreen",value:function(e){return os.open(this[e])}},{key:"exitFullscreen",value:function(){return os.exit()}},{key:"fullscreen",value:function(){for(var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"container",n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e?this.requestFullscreen.apply(this,[t].concat(xi(r))):this.exitFullscreen.apply(this,xi(r))}},{key:"focus",value:function(){this.videoElement.focus()}},{key:"isNodeInsideVideo",value:function(n){return-1<this.__videoExtendedNodes.indexOf(n)||this.__videoExtendedNodes.reduce(function(e,t){return e||yi(t,n)},!1)}},{key:"migrateVideoRequiredGuardedAttributes",value:function(i){var t=this;this.videoRequireGuardedAttributes.map(function(e){return[e,Ki(t.videoElement,e)]}).forEach(function(e){var t=fn(e,2),n=t[0],r=t[1];return Bi(i,n,r)})}},{key:"destroy",value:function(){this.removeVideo(),os.off("fullscreenchange",this._fullscreenMonitor),this.wrapper.innerHTML=this.originHTML,delete this.wrapper,delete this.plugins,this.destroyed=!0}},{key:"_autoFocusToVideo",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];pi(e)&&((t?Ui:Hi)(e,"mouseup",this._focusToVideo,!1,!0),(t?Ui:Hi)(e,"touchend",this._focusToVideo,!1,!0))}},{key:"_focusToVideo",value:function(){var e=window.scrollX,t=window.scrollY;ii(this.videoElement.focus)&&this.videoElement.focus(),window.scrollTo(e,t)}},{key:"_fullscreenMonitor",value:function(e){var t=os.fullscreenElement,n=this.isFullscreen;!t||!yi(this.wrapper,t)&&t!==this.wrapper?(this.isFullscreen=!1,this.fullscreenElement=void 0):(this.isFullscreen=!0,this.fullscreenElement=this.wrapper===t?"wrapper":this.container===t?"container":this.videoElement===t?"video":t),ci(e)&&n!==this.isFullscreen&&this.__dispatcher.binder.triggerSync({name:"fullscreenchange",target:"esFullscreen",id:"dispatcher"},e)}}]),a}()).prototype,"setAttr",[Qu,Zu],K(ns.prototype,"setAttr"),ns.prototype),as(ns.prototype,"getAttr",[Ju],K(ns.prototype,"getAttr"),ns.prototype),as(ns.prototype,"setStyle",[Xu],K(ns.prototype,"setStyle"),ns.prototype),as(ns.prototype,"getStyle",[es],K(ns.prototype,"getStyle"),ns.prototype),as(ns.prototype,"requestFullscreen",[ts],K(ns.prototype,"requestFullscreen"),ns.prototype),as(ns.prototype,"_focusToVideo",[ua],K(ns.prototype,"_focusToVideo"),ns.prototype),as(ns.prototype,"_fullscreenMonitor",[ua],K(ns.prototype,"_fullscreenMonitor"),ns.prototype),ns),fs={width:"100%",height:"100%",position:"relative",display:"block"},ds=function e(t,n,r){var i=this;$t(this,e),this.__dispatcher=t,this.__target=n,["width","height","position","display"].forEach(function(t){M(i,t,{get:function(){return this.__dispatcher.dom.getStyle(this.__target,t)},set:function(e){if(ai(e)&&(e+="px"),!li(e))throw new Error("The value of "+t+" in "+this.__target+"Config must be string, but not "+(void 0===e?"undefined":Rt(e))+".");this.__dispatcher.dom.setStyle(this.__target,t,e)},configurable:!0,enumerable:!0})}),Pi(this,r)},hs=l.f,vs=Ue.fastKey,ps=h?"_s":"size",ys=function(e,t){var n,r=vs(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n},gs={getConstructor:function(e,o,n,r){var i=e(function(e,t){Pn(e,i,o,"_i"),e._t=o,e._i=xe(null),e._f=void 0,e._l=void 0,e[ps]=0,null!=t&&Mn(t,n,e[r],e)});return rr(i.prototype,{clear:function(){for(var e=_o(this,o),t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[ps]=0},delete:function(e){var t=_o(this,o),n=ys(t,e);if(n){var r=n.n,i=n.p;delete t._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),t._f==n&&(t._f=r),t._l==n&&(t._l=i),t[ps]--}return!!n},forEach:function(e){_o(this,o);for(var t,n=b(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!ys(_o(this,o),e)}}),h&&hs(i.prototype,"size",{get:function(){return _o(this,o)[ps]}}),i},def:function(e,t,n){var r,i,o=ys(e,t);return o?o.v=n:(e._l=o={i:i=vs(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[ps]++,"F"!==i&&(e._i[i]=o)),e},getEntry:ys,setStrong:function(e,n,t){Ie(e,n,function(e,t){this._t=_o(e,n),this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?ze(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,ze(1))},t?"entries":"values",!t,!0),or(n)}};Mo("Map",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{get:function(e){var t=gs.getEntry(_o(this,"Map"),e);return t&&t.v},set:function(e,t){return gs.def(_o(this,"Map"),0===e?0:e,t)}},gs,!0);x(x.P+x.R,"Map",{toJSON:(cs="Map",function(){if(en(this)!=cs)throw TypeError(cs+"#toJSON isn't generic");return Mn(this,!(t=[]),t.push,t,e),t;var e,t})}),Co("Map"),No("Map");var ms,bs,ws,_s,Es,ks=y.Map,xs=t(n(function(e){e.exports={default:ks,__esModule:!0}}));function Os(n,r,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(n,r,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(n,r,o),o=null),o}var Ss=/^(before|after|_)/;function Ps(e){return!e.match(Ss)||(bi.warn("bus",'Secondary Event "'+e+'" could not be call straightly by API.'),!1)}var Ts,As,Ls,js,Ms,Cs,Ns,Is,Fs,zs,Rs,$s,Vs=(ms=ba(Ps),bs=ba(Ps,{backup:function(){return!1}}),ws=ba(Ps),_s=ba(Ps,{backup:function(){return!1}}),Os((Es=function(){function n(e,t){$t(this,n),this.events={},this.onceMap={},this.__dispatcher=e,this.__kind=t}return Kt(n,[{key:"on",value:function(e,t,n,r){this._addEvent([t,r,e],n)}},{key:"off",value:function(e,t,n,r){var i=[t,r,e];if(!this._removeEvent(i,n)){var o=this._getHandlerFromOnceMap(i,n);ii(o)&&this._removeEvent(i,o)&&this._removeFromOnceMap(i,n,o)}}},{key:"once",value:function(e,t,n,r){var i=this,o=[t,r,e],a=function e(){Ai(n,this).apply(void 0,arguments),i._removeEvent(o,e),i._removeFromOnceMap(o,n,e)};this._addEvent(o,a),this._addToOnceMap(o,n,a)}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=this.events[e];if(si(o))return-1<Ma.indexOf(e)?Nr.resolve():this._eventProcessor.apply(this,[e,{sync:!1}].concat(xi(r)));var a=this._getEventQueue(o.before,this.__dispatcher.order);return Mi.apply(void 0,[a].concat(xi(r))).then(function(){if(!(-1<Ma.indexOf(e)))return t._eventProcessor.apply(t,[e,{sync:!1}].concat(xi(r)))}).catch(function(e){return gi(e)&&t.__dispatcher.throwError(e),Nr.reject(e)})}},{key:"emitSync",value:function(e){for(var t=this.events[e],n=arguments.length,r=Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(si(t))return-1<Ma.indexOf(e)||this._eventProcessor.apply(this,[e,{sync:!0}].concat(xi(r)));var o=this._getEventQueue(t.before,this.__dispatcher.order);return Ci.apply(void 0,[o].concat(xi(r)))&&(-1<Ma.indexOf(e)||this._eventProcessor.apply(this,[e,{sync:!0}].concat(xi(r))))}},{key:"trigger",value:function(t){for(var n=this,e=arguments.length,r=Array(1<e?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];var o=this.events[t];if(si(o))return Nr.resolve(!0);var a=this._getEventQueue(o.main,this.__dispatcher.order);return Mi.apply(void 0,[a].concat(xi(r))).then(function(){var e=n._getEventQueue(o.after,n.__dispatcher.order);return Mi.apply(void 0,[e].concat(xi(r)))}).then(function(){return n._runSideEffectEvent.apply(n,[t,n.__dispatcher.order].concat(xi(r)))}).catch(function(e){return gi(e)&&n.__dispatcher.throwError(e),n._runSideEffectEvent.apply(n,[t,n.__dispatcher.order].concat(xi(r)))})}},{key:"triggerSync",value:function(e){var t=this.events[e];if(si(t))return!0;for(var n=this._getEventQueue(t.main,this.__dispatcher.order),r=this._getEventQueue(t.after,this.__dispatcher.order),i=arguments.length,o=Array(1<i?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];var u=Ci.apply(void 0,[n].concat(xi(o)))&&Ci.apply(void 0,[r].concat(xi(o)));return this._runSideEffectEvent.apply(this,[e,this.__dispatcher.order].concat(xi(o))),u}},{key:"destroy",value:function(){delete this.events,delete this.__dispatcher}},{key:"_addEvent",value:function(e,t){var n=(e=Si(e)).pop(),r=e.reduce(function(e,t){return e[t]=e[t]||{},e[t]},this.events);r[n]=r[n]||[],r[n].push(t)}},{key:"_removeEvent",value:function(e,t){for(var n=(e=Si(e)).pop(),r=this.events,i=[],o=0,a=e.length;o<a;o++){var u=r[e[o]];if(si(u))return;i.push([r,e[o]]),r=u}var s=r[n]||[],c=s.indexOf(t),l=-1<c;if(l&&s.splice(c,1),s.length<1){delete r[n];for(var f=i.length-1;-1<f;f--){var d=fn(i[f],2),h=d[0],v=d[1];if(!si(h[v]))break;delete h[v]}}return l}},{key:"_addToOnceMap",value:function(e,t,n){var r=e.join("-"),i=this.onceMap[r]=this.onceMap[r]||new xs;i.has(t)||i.set(t,[]),i.get(t).push(n)}},{key:"_removeFromOnceMap",value:function(e,t,n){var r=e.join("-"),i=this.onceMap[r],o=i.get(t),a=o.indexOf(n);o.splice(a,1),si(o)&&i.delete(t)}},{key:"_getHandlerFromOnceMap",value:function(e,t){var n=e.join("-"),r=this.onceMap[n];if(!ni(r)&&r.has(t))return r.get(t)[0]}},{key:"_getEventStage",value:function(e){var t=e.match(Ss),n=t&&t[0]||"main";return t&&(e=Ti(e.replace(Ss,""))),{stage:n,key:e}}},{key:"_getEventQueue",value:function(n,e){var r=this;return e=ri(e)?e.concat(["_vm"]):["_vm"],si(n)?[]:e.reduce(function(e,t){return si(n[t])||!ri(n[t])||!r.__dispatcher.plugins[t]&&"_vm"!==t?e:e.concat(n[t].map(function(e){return Ai(e,r.__dispatcher.plugins[t]||r.__dispatcher.vm)}))},[])}},{key:"_eventProcessor",value:function(e,t){for(var n=t.sync,r=-1<Na.indexOf(e),i=-1<za.indexOf(e),o=Boolean(Ia[e]),a=arguments.length,u=Array(2<a?a-2:0),s=2;s<a;s++)u[s-2]=arguments[s];if(r||i||o){var c,l;if(o)(c=this.__dispatcher)[Ia[e]].apply(c,xi(u));else(l=this.__dispatcher[r?"kernel":"dom"])[e].apply(l,xi(u));if(-1<Pa.indexOf(e)||-1<Aa.indexOf(e))return!0}return this[n?"triggerSync":"trigger"].apply(this,[e].concat(xi(u)))}},{key:"_runSideEffectEvent",value:function(e,t){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=this.events[e];return!si(o)&&(this._getEventQueue(o._,t).forEach(function(e){return e.apply(void 0,xi(r))}),!0)}}]),n}()).prototype,"emit",[ms],K(Es.prototype,"emit"),Es.prototype),Os(Es.prototype,"emitSync",[bs],K(Es.prototype,"emitSync"),Es.prototype),Os(Es.prototype,"trigger",[ws],K(Es.prototype,"trigger"),Es.prototype),Os(Es.prototype,"triggerSync",[_s],K(Es.prototype,"triggerSync"),Es.prototype),Es);function Ds(n,r,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(n,r,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(n,r,o),o=null),o}var Ks=/^(before|after|_)/;function Bs(e){var t=e.name,n=e.target,r=e.stage,i=function(e){var t=new RegExp("^(c|w)_");if(e.match(t)){var n=e.replace(t,""),r=0===e.indexOf("c")?"container":"wrapper";return bi.warn("We no longer support event names like "+e+". Please use "+n+" and options like { target: '"+r+"' } instead"),{name:n,target:r}}return"error"===e&&{name:"error",target:"kernel"}}(t);i&&(t=i.name,n=i.target);var o,a,u,s,c=(a=(o=t).match(Ks),u=a&&a[0]||"main",a&&(o=Ti(o.replace(Ks,""))),{name:o,stage:u}),l=c.stage;return t=c.name,n||(s=t,n=-1<Pa.indexOf(s)?"video":-1<Fa.indexOf(s)?"kernel":-1<Aa.indexOf(s)?"video-dom":-1<La.indexOf(s)?"esFullscreen":"plugin"),{name:t,stage:r||l,target:n}}function Gs(e){var t=e.id,n=e.fn,r=Bs(e),i=r.name,o=r.target,a=r.stage;if(!ii(n))throw new Error("You must provide a function to handle with event "+i+", but not "+(void 0===n?"undefined":Rt(n)));return{id:t,fn:n,name:i,target:o,stage:a}}function Ws(e){var t=e.id,n=e.name;return n&&li(n)&&!Ks.test(n)?!(!t||!li(t))||(bi.error("You must provide the id of emitter"),!1):(bi.error("You must provide a legal event name, which is string and could not started with before/after/_"),!1)}function qs(e){e.target=Bs(e).target;for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return[e].concat(xi(n))}var Us,Hs,Ys,Qs,Zs,Js,Xs,ec=(Ts=Jo(Gs),As=Jo(Gs),Ls=Jo(Gs),js=ba(Ws),Ms=Jo(qs),Cs=ba(Ws,{backup:function(){return!1}}),Ns=Jo(qs),Is=ba(Ws),Fs=Jo(qs),zs=ba(Ws,{backup:function(){return!1}}),Rs=Jo(qs),Ds(($s=function(){function u(e){$t(this,u),this.__dispatcher=e,this.kinds=["kernel","container","wrapper","video","video-dom","plugin","esFullscreen"],this.buses={},this.bindedEventNames={},this.bindedEventInfo={};var t=!0,n=!(this.pendingEventsInfo={}),r=void 0;try{for(var i,o=ln(this.kinds);!(t=(i=o.next()).done);t=!0){var a=i.value;this.bindedEventNames[a]=[],this.bindedEventInfo[a]=[],this.pendingEventsInfo[a]=[],this.buses[a]=new Vs(e,a)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}return Kt(u,[{key:"on",value:function(e){var t=e.target,n=e.id,r=e.name,i=e.fn,o=e.stage;return this._addEventListenerOnTarget({name:r,target:t,id:n}),this.buses[t].on(n,r,i,o)}},{key:"off",value:function(e){var t=e.target,n=e.id,r=e.name,i=e.fn,o=e.stage,a=this.buses[t].off(n,r,i,o);return this._removeEventListenerOnTargetWhenIsUseless({name:r,target:t}),a}},{key:"once",value:function(e){var t=e.target,n=e.id,r=e.name,i=e.fn,o=e.stage;return this.buses[t].once(n,r,i,o)}},{key:"emit",value:function(e){for(var t,n=e.target,r=e.name,i=arguments.length,o=Array(1<i?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return(t=this.buses[n]).emit.apply(t,[r].concat(xi(o)))}},{key:"emitSync",value:function(e){for(var t,n=e.target,r=e.name,i=arguments.length,o=Array(1<i?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return(t=this.buses[n]).emitSync.apply(t,[r].concat(xi(o)))}},{key:"trigger",value:function(e){for(var t,n=e.target,r=e.name,i=arguments.length,o=Array(1<i?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return(t=this.buses[n]).trigger.apply(t,[r].concat(xi(o)))}},{key:"triggerSync",value:function(e){for(var t,n=e.target,r=e.name,i=arguments.length,o=Array(1<i?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return(t=this.buses[n]).triggerSync.apply(t,[r].concat(xi(o)))}},{key:"bindEventOnPenetrateNode",value:function(i){var o=this,a=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.bindedEventInfo["video-dom"].forEach(function(e){var t=fn(e,2),n=t[0],r=t[1];a?Ui(i,n,r):o._addEventOnDom(i,n,r)})}},{key:"bindEventOnVideo",value:function(i){var o=this,a=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.bindedEventInfo["video-dom"].concat(this.bindedEventInfo.video).forEach(function(e){var t=fn(e,2),n=t[0],r=t[1];a?Ui(i,n,r):o._addEventOnDom(i,n,r)})}},{key:"listenOnMouseMoveEvent",value:function(t){var l=this,f=this.__dispatcher.dom,d="video-dom",h="_vm";Ca.forEach(function(c){var e=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=r.toElement,o=r.currentTarget,a=r.relatedTarget,u=r.type,s=i||a;return f.mouseInVideo&&"mouseleave"===u&&!f.isNodeInsideVideo(s)?(f.mouseInVideo=!1,l.triggerSync.apply(l,[{target:d,name:c,id:h}].concat(t))):!f.mouseInVideo&&"mouseenter"===u&&f.isNodeInsideVideo(o)?(f.mouseInVideo=!0,l.triggerSync.apply(l,[{target:d,name:c,id:h}].concat(t))):void 0};l._addEventOnDom(t,c,e),l.bindedEventNames[d].indexOf(c)<0&&(l.bindedEventNames[d].push(c),l.bindedEventInfo[d].push([c,e]))})}},{key:"migrateKernelEvent",value:function(i,o){this.bindedEventInfo.kernel.forEach(function(e){var t=fn(e,2),n=t[0],r=t[1];i.off(n,r),o.on(n,r)})}},{key:"destroy",value:function(){var a=this;this.kinds.forEach(function(i){if("kernel"===i)a.bindedEventInfo.kernel.forEach(function(e){var t=fn(e,2),n=t[0],r=t[1];a.__dispatcher.kernel.off(n,r)});else{var o=a._getTargetDom(i);a.bindedEventInfo[i].forEach(function(e){var t=fn(e,2),n=t[0],r=t[1];Ui(o,n,r),"video-dom"===i&&a.__dispatcher.dom.videoExtendedNodes.forEach(function(e){return Ui(e,n,r)})})}a.bindedEventInfo.kernel=[],a.bindedEventNames.kernel=[]})}},{key:"_addEventOnDom",value:function(e,t,n){if(-1<ja.indexOf(t))return Hi(e,t,n,!1,{passive:!0});Hi(e,t,n)}},{key:"_addEventListenerOnTarget",value:function(e){var r=this,i=e.name,o=e.target,t=e.id;if(this._isEventNeedToBeHandled(o,i)){var n=void 0;if(!(-1<this.bindedEventNames[o].indexOf(i))){var a=this._getTargetDom(o);if("kernel"===o){if(!this.__dispatcher.kernel)return void this.addPendingEvent(o,i,t);n=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.triggerSync.apply(r,[{target:o,name:i,id:"kernel"}].concat(t))},this.__dispatcher.kernel.on(i,n)}else"container"===o||"wrapper"===o?(n=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.triggerSync.apply(r,[{target:o,name:i,id:o}].concat(t))},this._addEventOnDom(a,i,n)):"video"===o?(n=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.trigger.apply(r,[{target:o,name:i,id:o}].concat(t))},this._addEventOnDom(a,i,n)):"video-dom"===o&&(n=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.triggerSync.apply(r,[{target:o,name:i,id:o}].concat(t))},this.__dispatcher.dom.videoExtendedNodes.forEach(function(e){return r._addEventOnDom(e,i,n)}),this._addEventOnDom(a,i,n));this.bindedEventNames[o].push(i),this.bindedEventInfo[o].push([i,n])}}}},{key:"_removeEventListenerOnTargetWhenIsUseless",value:function(e){var t=e.name,n=e.target;if(this._isEventNeedToBeHandled(n,t)){var r=this.bindedEventNames[n],i=r.indexOf(t);if(!(i<0)&&si(this.buses[n].events[t])){var o=this.bindedEventInfo[n],a=void 0,u=void 0;for(u=0;u<o.length;u++)if(o[u][0]===t){a=o[u][1];break}if(ii(a)){if("kernel"===n)this.__dispatcher.kernel.off(t,a);else Ui(this._getTargetDom(n),t,a),"video-dom"===n&&this.__dispatcher.dom.videoExtendedNodes.forEach(function(e){Ui(e,t,a)});o.splice(u,1),r.splice(i,1)}}}}},{key:"_getTargetDom",value:function(e){var t=void 0;switch(e){case"container":case"wrapper":t=this.__dispatcher.dom[e];break;default:t=this.__dispatcher.dom.videoElement}return t}},{key:"_isEventNeedToBeHandled",value:function(e,t){return"plugin"!==e&&"esFullscreen"!==e&&(Ca.indexOf(t)<0||"video"!==e)}},{key:"addPendingEvent",value:function(e,t,n){this.pendingEventsInfo[e].push([t,n])}},{key:"applyPendingEvents",value:function(e){for(var t=this.pendingEventsInfo[e],n=t.splice(0,t.length);n.length;){var r=n.pop(),i=fn(r,2),o=i[0],a=i[1];this._addEventListenerOnTarget({name:o,target:e,id:a})}}}]),u}()).prototype,"on",[Ts],K($s.prototype,"on"),$s.prototype),Ds($s.prototype,"off",[As],K($s.prototype,"off"),$s.prototype),Ds($s.prototype,"once",[Ls],K($s.prototype,"once"),$s.prototype),Ds($s.prototype,"emit",[js,Ms],K($s.prototype,"emit"),$s.prototype),Ds($s.prototype,"emitSync",[Cs,Ns],K($s.prototype,"emitSync"),$s.prototype),Ds($s.prototype,"trigger",[Is,Fs],K($s.prototype,"trigger"),$s.prototype),Ds($s.prototype,"triggerSync",[zs,Rs],K($s.prototype,"triggerSync"),$s.prototype),$s);function tc(n,r,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(n,r,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(n,r,o),o=null),o}var nc={},rc={};function ic(e){if(!li(e))throw new Error("Plugin's name must be a string, but not \""+e+'" in '+(void 0===e?"undefined":Rt(e)));return Ti(e)}var oc,ac,uc=(Us=Jo(ic),Hs=Jo(ic),Ys=Jo(function(e){if(ii(e)){if(!(e.prototype instanceof $u))throw new TypeError("Your are trying to install plugin "+e.name+", but it's not extends from Chimee.plugin.")}else{if(!oi(e)||si(e))throw new TypeError("plugin's config must be an Object, but not \""+e+'" in '+(void 0===e?"undefined":Rt(e)));var t=e.name;if(!li(t)||t.length<1)throw new TypeError('plugin must have a legal namea, but not "'+t+'" in '+(void 0===t?"undefined":Rt(t)))}}),Qs=Jo(ic),Zs=Jo(ic),Js=Jo(ic),tc((Xs=function(){function c(e,t){var n=this;if($t(this,c),this.plugins={},this.order=[],this.readySync=!1,this.zIndexMap={inner:[],outer:[]},this.changeWatchable=!0,this.kernelEventHandlerList=[],!oi(e))throw new TypeError('UserConfig must be an Object, but not "'+e+'" in '+(void 0===e?"undefined":Rt(e)));this.dom=new ls(e,this),this.vm=t,this.videoConfigReady=!1,this.videoConfig=new Tu(this,e),ri(e.plugins)&&!ri(e.plugin)&&(e.plugin=e.plugins,delete e.plugins),this.binder=new ec(this),this.binder.listenOnMouseMoveEvent(this.dom.videoElement),this._initUserPlugin(e.plugin);var r=Pi({},fs,e.container||{});if(this.order.forEach(function(e){return n.plugins[e].__init(n.videoConfig,r)}),this.videoConfigReady=!0,this.videoConfig.init(),this.containerConfig=new ds(this,"container",r),this.kernel=this._createKernel(this.dom.videoElement,this.videoConfig),this.binder.applyPendingEvents("kernel"),e.noDefaultContextMenu){var i=e.noDefaultContextMenu,o="container"===i||"wrapper"===i?i:"video-dom";this.binder.on({target:o,id:"_vm",name:"contextmenu",fn:function(e){return e.preventDefault()},stage:"main"})}var a=[];this.order.forEach(function(e){var t=n.plugins[e].__inited();di(t)&&a.push(t)}),this.readySync=0===a.length,this.ready=this.readySync?Nr.resolve():Nr.all(a).then(function(){n.readySync=!0,n.onReady()}),this.readySync&&this.onReady()}var e;return Kt(c,[{key:"onReady",value:function(){this.binder.trigger({target:"plugin",name:"ready",id:"dispatcher"}),this._autoloadVideoSrcAtFirst()}},{key:"use",value:function(e){if(li(e)&&(e={name:e,alias:void 0}),!oi(e)||oi(e)&&!li(e.name))throw new TypeError("pluginConfig do not match requirement");li(e.alias)||(e.alias=void 0);var t=e,n=t.name,r=t.alias;e.name=r||n,delete e.alias;var i=Ti(n),o=Ti(r||n),a=e,u=c.getPluginConfig(i);if(si(u))throw new TypeError("You have not installed plugin "+i);oi(u)&&(u.id=o);var s=ii(u)?new u({id:o},this,a):new $u(u,this,a);return this.plugins[o]=s,M(this.vm,o,{value:s,configurable:!0,enumerable:!1,writable:!1}),this.order.push(o),this._sortZIndex(),this.videoConfigReady&&s.__inited(),s.ready}},{key:"unuse",value:function(e){var t=this.plugins[e];if(oi(t)&&ii(t.$destroy)){t.$destroy();var n=this.order.indexOf(e);-1<n&&this.order.splice(n,1),delete this.plugins[e],delete this.vm[e]}else delete this.plugins[e]}},{key:"hasUsed",value:function(e){return oi(this.plugins[e])}},{key:"throwError",value:function(e){this.vm.__throwError(e)}},{key:"silentLoad",value:function(t){var h=this,v=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=v.duration,p=void 0===e?3:e,n=v.bias,y=void 0===n?0:n,r=v.repeatTimes,g=void 0===r?0:r,i=v.increment,m=void 0===i?0:i,o=v.isLive,b=void 0===o?this.videoConfig.isLive:o,a=v.box,u=void 0===a?this.videoConfig.box:a,s=v.kernels,c=void 0===s?this.videoConfig.kernels:s,l=v.preset,f=void 0===l?this.videoConfig.preset:l,w=v.immediate||b,_={isLive:b,box:u,src:t,kernels:c,preset:f};return Mi(new Array(g+1).fill(1).map(function(e,d){return function(){return new Nr(function(r,i){v.abort&&i({error:!0,message:"user abort the mission"});var o=document.createElement("video"),n=h.kernel.currentTime+p+m*d,a=!(o.muted=!0),u=void 0,s=void 0,c=void 0,l=void 0,f=function e(){var t=h.kernel.currentTime;if(y<=0&&n<=t||0<y&&(Math.abs(n-t)<=y&&a||y<t-n))return Ui(h.dom.videoElement,"timeupdate",e),Ui(o,"error",s,!0),a?i({error:!1,video:o,kernel:u}):(Ui(o,"canplay",c,!0),Ui(o,"loadedmetadata",l,!0),u.destroy(),r())};c=function(){if(a=!0,w)return Ui(h.dom.videoElement,"timeupdate",f),Ui(o,"error",s,!0),i({error:!1,video:o,kernel:u})},l=function(){b||u.seek(w?h.kernel.currentTime:n)},s=function(e){Ui(o,"canplay",c,!0),Ui(o,"loadedmetadata",l,!0),Ui(h.dom.videoElement,"timeupdate",f),u.off("error",s);var t=void 0;if(!si(e.data)&&e.data.errmsg){var n=e.data.errmsg;bi.error("chimee's silentload bump into a kernel error",n),t=new Error(n)}else t=si(o.error)?new Error("unknow video error"):new Error(o.error.message),bi.error("chimee's silentload",t.message);return u.destroy(),h._silentLoadTempKernel=void 0,d===g?i(t):r(t)},Hi(o,"canplay",c,!0),Hi(o,"loadedmetadata",l,!0),Hi(o,"error",s,!0),u=h._createKernel(o,_),(h._silentLoadTempKernel=u).on("error",s),Hi(h.dom.videoElement,"timeupdate",f),u.load()})}})).then(function(){var e="The silentLoad for "+t+" timed out. Please set a longer duration or check your network";return bi.warn("chimee's silentLoad",e),Nr.reject(new Error(e))}).catch(function(e){if(gi(e))return Nr.reject(e);if(e.error)return bi.warn("chimee's silentLoad",e.message),Nr.reject(new Error(e.message));var t=e.video,n=e.kernel;return v.abort?(n.destroy(),Nr.reject(new Error("user abort the mission"))):h.dom.videoElement.paused?(h.switchKernel({video:t,kernel:n,config:_}),Nr.resolve()):new Nr(function(e){Hi(t,"play",function(){h.switchKernel({video:t,kernel:n,config:_}),e()},!0),t.play()})})}},{key:"load",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=li(e)?e:oi(e)&&li(e.src)?e.src:"";oi(e)&&(delete e.src,t=e);var r=this.kernel.box,i=this.videoConfig,o=t,a=o.isLive,u=void 0===a?i.isLive:a,s=o.box,c=void 0===s?io({src:n,box:i.box}):s,l=o.preset,f=void 0===l?i.preset:l,d=o.kernels,h=void 0===d?i.kernels:d;if("native"!==c||c!==r||!si(t)){var v=document.createElement("video"),p={isLive:u,box:c,preset:f,src:n,kernels:h},y=this._createKernel(v,p);this.switchKernel({video:v,kernel:y,config:p,notifyChange:!0})}var g=this.videoConfig.autoload;this._changeUnwatchable(this.videoConfig,"autoload",!1),this.videoConfig.src=n||this.videoConfig.src,this.kernel.load(this.videoConfig.src),this._changeUnwatchable(this.videoConfig,"autoload",g)}},{key:"switchKernel",value:function(e){var t=this,n=e.video,r=e.kernel,i=e.config,o=e.notifyChange,a=this.kernel,u=Si(this.videoConfig);this.dom.migrateVideoRequiredGuardedAttributes(n),this.dom.removeVideo(),this.dom.installVideo(n),this.videoConfig.changeWatchable=!1,this.videoConfig.autoload=!1,this.videoConfig.src=i.src,this.videoConfig._realDomAttr.forEach(function(e){"src"!==e&&(t.videoConfig[e]=u[e])}),this.videoConfig.changeWatchable=!0,this.binder.migrateKernelEvent(a,r),this.kernel=r,this._silentLoadTempKernel=void 0;var s=i.isLive,c=i.box,l=i.preset,f=i.kernels;$r(this.videoConfig,{isLive:s,box:c,preset:l,kernels:f}),a.destroy(),o?this.binder&&this.binder.bindEventOnVideo&&this.binder.bindEventOnVideo(n):setTimeout(function(){t.binder&&t.binder.bindEventOnVideo&&t.binder.bindEventOnVideo(n)}),this.inPictureInPictureMode&&this.exitPictureInPicture()}},{key:"requestPictureInPicture",value:(e=Ir(Sn.mark(function e(){var t,n,r;return Sn.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("pictureInPictureEnabled"in document)){e.next=8;break}if(!this.inPictureInPictureMode){e.next=3;break}return e.abrupt("return",Nr.resolve(window.__chimee_picture_in_picture_window));case 3:return e.next=5,this.dom.videoElement.requestPictureInPicture();case 5:return t=e.sent,window.__chimee_picture_in_picture_window=t,e.abrupt("return",t);case 8:return e.next=10,Promise.resolve().then(function(){return nl});case 10:return n=e.sent,r=n.default,c.hasInstalled(r.name)||c.install(r),this.hasUsed(r.name)||this.use(r.name),e.abrupt("return",this.plugins.pictureInPicture.requestPictureInPicture());case 15:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"exitPictureInPicture",value:function(){return"pictureInPictureEnabled"in document&&this.inPictureInPictureMode?(window.__chimee_picture_in_picture_window=void 0,document.exitPictureInPicture()):this.plugins.pictureInPicture&&this.plugins.pictureInPicture.exitPictureInPicture()}},{key:"destroy",value:function(){for(var e in this.plugins)this.unuse(e);this.binder.destroy(),delete this.binder,this.dom.destroy(),delete this.dom,this.kernel.destroy(),delete this.kernel,delete this.vm,delete this.plugins,delete this.order}},{key:"_initUserPlugin",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return ri(e)||(bi.warn("Dispatcher",'UserConfig.plugin can only by an Array, but not "'+e+'" in '+(void 0===e?"undefined":Rt(e))),e=[]),e.map(function(e){return t.use(e)})}},{key:"_sortZIndex",value:function(){var o=this,e=this.order.reduce(function(e,t){var n=o.plugins[t];if(si(n))return e;var r=e[n.$inner?"inner":"outer"],i=n.$level;return r[i]=r[i]||[],r[i].push(t),e},{inner:{},outer:{}}),t=e.inner,n=e.outer;t[0]=t[0]||[],t[0].unshift("videoElement"),n[0]=n[0]||[],n[0].unshift("container");var r=ji(t),i=ji(n);this.dom.setPluginsZIndex(r),this.dom.setPluginsZIndex(i),this.zIndexMap.inner=r,this.zIndexMap.outer=i}},{key:"_getTopLevel",value:function(e){var t=this.zIndexMap[e?"inner":"outer"],n=this.plugins[t[t.length-1]];return si(n)?0:n.$level}},{key:"_autoloadVideoSrcAtFirst",value:function(){if(this.videoConfig.autoload){if(!this.videoConfig.src)return void bi.warn("You have not set the src, so you better set autoload to be false. Accroding to https://github.com/Chimeejs/chimee/blob/master/doc/zh-cn/chimee-api.md#src.");this.binder.emit({name:"load",target:"plugin",id:"dispatcher"},{src:this.videoConfig.src})}}},{key:"_changeUnwatchable",value:function(e,t,n){this.changeWatchable=!1,e[t]=n,this.changeWatchable=!0}},{key:"_createKernel",value:function(e,t){var i=t.kernels,n=t.preset;si(i)&&!si(n)&&bi.warn("preset will be deprecated in next major version, please use kernels instead.");var u={},o={};return ri(i)&&(o=i.reduce(function(e,t){if(li(t)){var n=rc[t];return ii(n)?e[t]=n:bi.warn("You have not installed kernel for "+t+"."),e}if(oi(t)){var r=t.name,i=t.handler;if(li(i)){var o=rc[i];return ii(o)?(e[i]=o,u[i]=t):bi.warn("You have not installed kernel for "+i+"."),e}if(ii(i)){var a=r||i.name;return e[a]=i,u[a]=t,e}return bi.warn("When you pass in an SingleKernelConfig in Array, you must clarify it's handler, we only support handler in string or function but not "+(void 0===i?"undefined":Rt(i))),e}return bi.warn("If you pass in kernels as array, you must pass in kernels in string or function, but not "+(void 0===t?"undefined":Rt(t))),e},{})),oi(i)&&gn(i).forEach(function(e){var t=i[e];if(!ii(t)){if(oi(t)){var n=t.handler;if(li(n)){var r=rc[n];return ii(r)?(o[e]=r,void(u[e]=t)):void bi.warn("You have not installed kernel for "+n+".")}return ii(n)?(o[e]=n,void(u[e]=t)):void bi.warn("When you pass in an SingleKernelConfig in Object, you must clarify it's handler, we only support handler in string or function but not "+(void 0===n?"undefined":Rt(n)))}return bi.warn("If you pass in kernels as object, you must pass in kernels in string or function, but not "+(void 0===t?"undefined":Rt(t))),i}o[e]=t}),t.preset=$r(o,n),t.presetConfig=u,new oo(e,t)}},{key:"inPictureInPictureMode",get:function(){return"pictureInPictureEnabled"in document?this.dom.videoElement===document.pictureInPictureElement:Boolean(this.plugins.pictureInPicture&&this.plugins.pictureInPicture.isShown)}}],[{key:"install",value:function(e){var t=e.name,n=Ti(t);si(nc[n])||bi.warn("Dispatcher","You have installed "+t+" again. And the older one will be replaced");var r=ii(e)?e:Pi({id:n},e);return nc[n]=r,n}},{key:"hasInstalled",value:function(e){return!si(nc[e])}},{key:"uninstall",value:function(e){delete nc[e]}},{key:"getPluginConfig",value:function(e){return nc[e]}},{key:"installKernel",value:function(e,t){(oi(e)?pn(e):[[e,t]]).forEach(function(e){var t=fn(e,2),n=t[0],r=t[1];if(!ii(r))throw new Error("The kernel you install on "+n+" must be a Function, but not "+(void 0===r?"undefined":Rt(r)));ii(rc[n])&&bi.warn("You have alrady install a kernel on "+n+", and now we will replace it"),rc[n]=r})}},{key:"uninstallKernel",value:function(e){delete rc[e]}},{key:"hasInstalledKernel",value:function(e){return ii(rc[e])}}]),c}()).prototype,"unuse",[Us],K(Xs.prototype,"unuse"),Xs.prototype),tc(Xs.prototype,"hasUsed",[Hs],K(Xs.prototype,"hasUsed"),Xs.prototype),tc(Xs.prototype,"throwError",[ua],K(Xs.prototype,"throwError"),Xs.prototype),tc(Xs.prototype,"inPictureInPictureMode",[da],K(Xs.prototype,"inPictureInPictureMode"),Xs.prototype),tc(Xs,"install",[Ys],K(Xs,"install"),Xs),tc(Xs,"hasInstalled",[Qs],K(Xs,"hasInstalled"),Xs),tc(Xs,"uninstall",[Zs],K(Xs,"uninstall"),Xs),tc(Xs,"getPluginConfig",[Js],K(Xs,"getPluginConfig"),Xs),Xs);var sc,cc,lc,fc,dc,hc,vc=(oc=function(){function o(){var e,t,n,r;$t(this,o),this.log={error:!0,info:!0,warn:!0,debug:!0,verbose:!0},t="_silent",r=e=this,(n=ac)&&M(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0}),this.errorHandler=void 0;var i=gn(this.log).reduce(function(e,t){return e[t]=Zo({get:function(){return bi["ENABLE_"+t.toUpperCase()]},set:function(e){return!0===(bi["ENABLE_"+t.toUpperCase()]=e)&&(this.silent=!1),e}}),e},{});pa(this.log,i,{self:!0})}return Kt(o,[{key:"silent",get:function(){return this._silent},set:function(t){var n=this;t=!!t,this._silent=t,gn(this.log).forEach(function(e){n.log[e]=!t})}},{key:"useStyleFullscreen",get:function(){return os.useStyleFirst},set:function(e){os.useStyleFirst=!!e}}]),o}(),sc=oc.prototype,cc="_silent",lc=[da],fc={enumerable:!0,initializer:function(){return!1}},hc={},Object.keys(fc).forEach(function(e){hc[e]=fc[e]}),hc.enumerable=!!hc.enumerable,hc.configurable=!!hc.configurable,("value"in hc||hc.initializer)&&(hc.writable=!0),hc=lc.slice().reverse().reduce(function(e,t){return t(sc,cc,e)||e},hc),dc&&void 0!==hc.initializer&&(hc.value=hc.initializer?hc.initializer.call(dc):void 0,hc.initializer=void 0),void 0===hc.initializer&&(Object.defineProperty(sc,cc,hc),hc=null),ac=hc,oc),pc=n(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),yc=n(function(e){var t=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)}),gc=(yc.version,function(e){return"object"==typeof e?null!==e:"function"==typeof e}),mc=function(e){if(!gc(e))throw TypeError(e+" is not an object!");return e},bc=function(e){try{return!!e()}catch(e){return!0}},wc=!bc(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),_c=pc.document,Ec=gc(_c)&&gc(_c.createElement),kc=!wc&&!bc(function(){return 7!=Object.defineProperty((e="div",Ec?_c.createElement(e):{}),"a",{get:function(){return 7}}).a;var e}),xc=Object.defineProperty,Oc={f:wc?Object.defineProperty:function(e,t,n){if(mc(e),t=function(e,t){if(!gc(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!gc(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!gc(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!gc(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}(t,!0),mc(n),kc)try{return xc(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},Sc=wc?function(e,t,n){return Oc.f(e,t,{enumerable:!((r=1)&r),configurable:!(2&r),writable:!(4&r),value:n});var r}:function(e,t,n){return e[t]=n,e},Pc={}.hasOwnProperty,Tc=function(e,t){return Pc.call(e,t)},Ac=0,Lc=Math.random(),jc=n(function(e){var t,o="Symbol(".concat(void 0===(t="src")?"":t,")_",(++Ac+Lc).toString(36)),n="toString",r=Function[n],a=(""+r).split(n);yc.inspectSource=function(e){return r.call(e)},(e.exports=function(e,t,n,r){var i="function"==typeof n;i&&(Tc(n,"name")||Sc(n,"name",t)),e[t]!==n&&(i&&(Tc(n,o)||Sc(n,o,e[t]?""+e[t]:a.join(String(t)))),e===pc?e[t]=n:r?e[t]?e[t]=n:Sc(e,t,n):(delete e[t],Sc(e,t,n)))})(Function.prototype,n,function(){return"function"==typeof this&&this[o]||r.call(this)})}),Mc=function(r,i,e){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(r),void 0===i)return r;switch(e){case 1:return function(e){return r.call(i,e)};case 2:return function(e,t){return r.call(i,e,t)};case 3:return function(e,t,n){return r.call(i,e,t,n)}}return function(){return r.apply(i,arguments)}},Cc="prototype",Nc=function(e,t,n){var r,i,o,a,u=e&Nc.F,s=e&Nc.G,c=e&Nc.S,l=e&Nc.P,f=e&Nc.B,d=s?pc:c?pc[t]||(pc[t]={}):(pc[t]||{})[Cc],h=s?yc:yc[t]||(yc[t]={}),v=h[Cc]||(h[Cc]={});for(r in s&&(n=t),n)o=((i=!u&&d&&void 0!==d[r])?d:n)[r],a=f&&i?Mc(o,pc):l&&"function"==typeof o?Mc(Function.call,o):o,d&&jc(d,r,o,e&Nc.U),h[r]!=o&&Sc(h,r,a),l&&v[r]!=o&&(v[r]=o)};pc.core=yc,Nc.F=1,Nc.G=2,Nc.S=4,Nc.P=8,Nc.B=16,Nc.W=32,Nc.U=64,Nc.R=128;Nc(Nc.G,{global:pc});var Ic,Fc,zc,Rc,$c,Vc,Dc,Kc,Bc,Gc,Wc,qc,Uc,Hc,Yc,Qc,Zc=yc.global;function Jc(e,t,n,r){n&&M(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Xc(n,r,e,t,i){var o={};return Object.keys(t).forEach(function(e){o[e]=t[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=e.slice().reverse().reduce(function(e,t){return t(n,r,e)||e},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(n,r,o),o=null),o}var el=oa()((Qc=Yc=function(e){function n(e){$t(this,n);var t=Vt(this,(n.__proto__||ne(n)).call(this));if(t.destroyed=!1,Jc(t,"__id",zc,t),Jc(t,"version",Rc,t),Jc(t,"config",$c,t),Zc.Object.defineProperty||bi.error("Chimee","We detect that this browser lack of Object.defineProperty. Chimee can't run on this browser"),Zc.Promise||bi.error("Chimee","We detect that this browser lack of Promise. If you are running Chimee in old browser. Please make sure you have import polyfill such as babel-polyfill."),li(e)||pi(e))e={wrapper:e,controls:!0};else{if(!oi(e))throw new Error("You must pass in an Object containing wrapper or string or element to new a Chimee");if(!e.wrapper)throw new Error("You must pass in an legal object")}return t.__dispatcher=new uc(e,t),t.ready=t.__dispatcher.ready,t.readySync=t.__dispatcher.readySync,t.__wrapAsVideo(t.__dispatcher.videoConfig),t}return Zt(n,Ru),Kt(n,null,[{key:"registerEvents",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.target;if(!t||!li(t))throw new Error("The event name must be a string, but not "+(void 0===t?"undefined":Rt(t)));if(!n||!li(n))throw new Error("The event target must be a string, but not "+(void 0===n?"undefined":Rt(n)));"kernel"===n&&Fa.push(t)}}]),Kt(n,[{key:"destroy",value:function(){this.destroyed||(Dt(n.prototype.__proto__||ne(n.prototype),"__destroy",this).call(this),this.__dispatcher.destroy(),Object.defineProperty(this,"__dispatcher",{get:function(){throw new Error("This instance has been destroyed.")},enumerable:!0,configurable:!0}),this.destroyed=!0)}},{key:"use",value:function(e){return this.__dispatcher.use(e)}},{key:"unuse",value:function(e){return this.__dispatcher.unuse(e)}},{key:"__throwError",value:function(e){li(e)&&(e=new Error(e));var t=this.config.errorHandler||n.config.errorHandler;if(ii(t))return t(e);if(!n.config.silent){if(gi(e))throw e;console.error(e)}}}]),n}(),Yc.plugin=$u,Yc.config=new vc,Yc.install=uc.install,Yc.uninstall=uc.uninstall,Yc.hasInstalled=uc.hasInstalled,Yc.installKernel=uc.installKernel,Yc.uninstallKernel=uc.uninstallKernel,Yc.hasInstalledKernel=uc.hasInstalledKernel,Yc.getPluginConfig=uc.getPluginConfig,zc=Xc((Fc=Qc).prototype,"__id",[ca],{enumerable:!0,initializer:function(){return"_vm"}}),Rc=Xc(Fc.prototype,"version",[ca],{enumerable:!0,initializer:function(){return"0.11.0"}}),$c=Xc(Fc.prototype,"config",[ca],{enumerable:!0,initializer:function(){return{errorHandler:void 0}}}),Xc(Fc,"plugin",[ca],(Vc=(Vc=K(Fc,"plugin"))?Vc.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return Vc}}),Fc),Xc(Fc,"config",[ca],(Dc=(Dc=K(Fc,"config"))?Dc.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return Dc}}),Fc),Xc(Fc,"install",[ca],(Kc=(Kc=K(Fc,"install"))?Kc.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return Kc}}),Fc),Xc(Fc,"uninstall",[ca],(Bc=(Bc=K(Fc,"uninstall"))?Bc.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return Bc}}),Fc),Xc(Fc,"hasInstalled",[ca],(Gc=(Gc=K(Fc,"hasInstalled"))?Gc.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return Gc}}),Fc),Xc(Fc,"installKernel",[ca],(Wc=(Wc=K(Fc,"installKernel"))?Wc.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return Wc}}),Fc),Xc(Fc,"uninstallKernel",[ca],(qc=(qc=K(Fc,"uninstallKernel"))?qc.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return qc}}),Fc),Xc(Fc,"hasInstalledKernel",[ca],(Uc=(Uc=K(Fc,"hasInstalledKernel"))?Uc.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return Uc}}),Fc),Xc(Fc,"getPluginConfig",[ca],(Hc=(Hc=K(Fc,"getPluginConfig"))?Hc.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return Hc}}),Fc),Ic=Fc))||Ic,tl=function(e){function a(e){var t;$t(this,a);for(var n=arguments.length,r=Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=Vt(this,(t=a.__proto__||ne(a)).call.apply(t,[this,$r(e,{el:document.createElement("canvas"),penetrate:!0,inner:!1})].concat(xi(r))));return o.isShown=!1,o.hasStopRender=!0,o.myStyle={position:"fixed",top:"",left:"",right:0,bottom:0,width:277,height:156},o}return Zt(a,$u),Kt(a,[{key:"create",value:function(){Gi(this.$dom,"chimee-plugin-picture-in-picture"),this.getContext()}},{key:"inited",value:function(){this.setStyle()}},{key:"show",value:function(){Zi(this.$dom,"display","block"),this.isShown=!0}},{key:"hide",value:function(){Zi(this.$dom,"display","none"),this.isShown=!1}},{key:"closeCurrentPicture",value:function(){window.__chimee_picture_in_picture&&window.__chimee_picture_in_picture.plugin&&window.__chimee_picture_in_picture.plugin.exitPictureInPicture()}},{key:"requestPictureInPicture",value:function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).autoplay,t=void 0!==e&&e;this.closeCurrentPicture(),this.show(),this.poller(this.render),t&&this.paused?this.play():t||this.paused||this.pause(),window.__chimee_picture_in_picture={plugin:this,window:this.$dom,element:this.$video}}},{key:"exitPictureInPicture",value:function(){this.hide(),window.__chimee_picture_in_picture={}}},{key:"getContext",value:function(){this.ctx=this.$dom.getContext("2d")}},{key:"poller",value:function(e){var t=this;requestAnimationFrame(function(){e.call(t),t.isShown?(t.poller(e),t.hasStopRender=!1):t.hasStopRender=!0})}},{key:"render",value:function(){this.isShown&&this.ctx.drawImage(this.$video,0,0,this.myStyle.width,this.myStyle.height)}},{key:"setStyle",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};for(var t in $r(this.myStyle,e),this.$dom.setAttribute("width",this.myStyle.width.toString()),this.$dom.setAttribute("height",this.myStyle.height.toString()),this.myStyle)if("width"!==t&&"height"!==t){var n=this.myStyle[t];Zi(this.$dom,t,n)}}}]),a}(),nl=Object.freeze({default:tl});return el});
//# sourceMappingURL=/sm/ee21e7c50676e54d5ef8ef2337113cc45dbb36418cf5b77c30ab57249bf24eb2.map